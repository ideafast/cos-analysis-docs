

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Useful functions &mdash; COS-analysis  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Model upload requirements" href="model.html" />
    <link rel="prev" title="Demonstration" href="DEMO.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            COS-analysis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction to COS-analysis package</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEMO.html">Demonstration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Useful functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#read-device-data">Read device data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-device-dataset">read_device_dataset</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#read-diary">Read diary</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-diaries">load_diaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#format-diaries">format_diaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-timings">get_timings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#read-ucam-data">Read UCAM data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-demographics">get_demographics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-tup-pros">get_tup_PROs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-baseline-pros">get_baseline_PROs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-disease-score">get_disease_score</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#aggregate-and-combine-data-for-analysis">Aggregate and combine data for analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#build-analysis-dataset">build_analysis_dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-dataset-on-timings">build_dataset_on_timings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-dataset-on-frequency">build_dataset_on_frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processing">processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#upload-a-model-and-run-inferences">Upload a model and run inferences</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upload-model">upload_model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-inference-on-analysis-set">run_inference_on_analysis_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compute-rmse">compute_rmse</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#cosanalysis-package-all-functions">cosanalysis package - all functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dataset-manager">dataset_manager</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.dataset_manager.device_data_manager">device_data_manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.get_AX_location"><code class="docutils literal notranslate"><span class="pre">get_AX_location()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.load_and_save_device_dataset"><code class="docutils literal notranslate"><span class="pre">load_and_save_device_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.read_data_from_archive"><code class="docutils literal notranslate"><span class="pre">read_data_from_archive()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.read_device_dataset"><code class="docutils literal notranslate"><span class="pre">read_device_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.read_device_records"><code class="docutils literal notranslate"><span class="pre">read_device_records()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.read_record"><code class="docutils literal notranslate"><span class="pre">read_record()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.device_data_manager.read_record_wrapper"><code class="docutils literal notranslate"><span class="pre">read_record_wrapper()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.dataset_manager.diaries_manager">diaries_manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.assign_season"><code class="docutils literal notranslate"><span class="pre">assign_season()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.expand_row"><code class="docutils literal notranslate"><span class="pre">expand_row()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.format_diaries"><code class="docutils literal notranslate"><span class="pre">format_diaries()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_baseline_PROs"><code class="docutils literal notranslate"><span class="pre">get_baseline_PROs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_baselines"><code class="docutils literal notranslate"><span class="pre">get_baselines()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_daily_diaries"><code class="docutils literal notranslate"><span class="pre">get_daily_diaries()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_demographics"><code class="docutils literal notranslate"><span class="pre">get_demographics()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_disease_score"><code class="docutils literal notranslate"><span class="pre">get_disease_score()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_longitudinal_covariates"><code class="docutils literal notranslate"><span class="pre">get_longitudinal_covariates()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_questions_dict"><code class="docutils literal notranslate"><span class="pre">get_questions_dict()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_timings"><code class="docutils literal notranslate"><span class="pre">get_timings()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.get_tup_PROs"><code class="docutils literal notranslate"><span class="pre">get_tup_PROs()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.load_diaries"><code class="docutils literal notranslate"><span class="pre">load_diaries()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.map_tup"><code class="docutils literal notranslate"><span class="pre">map_tup()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.diaries_manager.read_adam_dataset"><code class="docutils literal notranslate"><span class="pre">read_adam_dataset()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.dataset_manager.utils">utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.add_tup_day"><code class="docutils literal notranslate"><span class="pre">add_tup_day()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.add_tups"><code class="docutils literal notranslate"><span class="pre">add_tups()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_cohorts"><code class="docutils literal notranslate"><span class="pre">check_cohorts()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_participants"><code class="docutils literal notranslate"><span class="pre">check_participants()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_adam"><code class="docutils literal notranslate"><span class="pre">check_valid_adam()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_dataset"><code class="docutils literal notranslate"><span class="pre">check_valid_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_device"><code class="docutils literal notranslate"><span class="pre">check_valid_device()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_devices"><code class="docutils literal notranslate"><span class="pre">check_valid_devices()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_ias_dataset"><code class="docutils literal notranslate"><span class="pre">check_valid_ias_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.check_valid_type"><code class="docutils literal notranslate"><span class="pre">check_valid_type()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.get_device_measures"><code class="docutils literal notranslate"><span class="pre">get_device_measures()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.get_tup_dates"><code class="docutils literal notranslate"><span class="pre">get_tup_dates()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.get_valid_devices"><code class="docutils literal notranslate"><span class="pre">get_valid_devices()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.get_version_id"><code class="docutils literal notranslate"><span class="pre">get_version_id()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.read_dataset"><code class="docutils literal notranslate"><span class="pre">read_dataset()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.utils.upload_dataset"><code class="docutils literal notranslate"><span class="pre">upload_dataset()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.dataset_manager.adam_dataset">adam_dataset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.dataset_manager.adam_dataset.fetch_adam_data"><code class="docutils literal notranslate"><span class="pre">fetch_adam_data()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#model-manager">model_manager</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">model_manager</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_manager.run_inference_on_analysis_set"><code class="docutils literal notranslate"><span class="pre">run_inference_on_analysis_set()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_manager.upload_model"><code class="docutils literal notranslate"><span class="pre">upload_model()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.model_manager.model_utils">model_utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.check_files"><code class="docutils literal notranslate"><span class="pre">check_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.check_json"><code class="docutils literal notranslate"><span class="pre">check_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.check_output"><code class="docutils literal notranslate"><span class="pre">check_output()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.check_used_function"><code class="docutils literal notranslate"><span class="pre">check_used_function()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.fetch_true_target_values"><code class="docutils literal notranslate"><span class="pre">fetch_true_target_values()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.parse_json"><code class="docutils literal notranslate"><span class="pre">parse_json()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.run_inference"><code class="docutils literal notranslate"><span class="pre">run_inference()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.model_utils.test_run_inference"><code class="docutils literal notranslate"><span class="pre">test_run_inference()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-cosanalysis.model_manager.performance_metrics">performance_metrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cosanalysis.model_manager.performance_metrics.compute_rmse"><code class="docutils literal notranslate"><span class="pre">compute_rmse()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosanalysis.aggregation">aggregation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation.aggregate_device_data_on_frequency"><code class="docutils literal notranslate"><span class="pre">aggregate_device_data_on_frequency()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation.aggregate_device_data_on_timings"><code class="docutils literal notranslate"><span class="pre">aggregate_device_data_on_timings()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation.get_device_type"><code class="docutils literal notranslate"><span class="pre">get_device_type()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosanalysis.aggregation_utils">aggregation_utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.aggregate_data"><code class="docutils literal notranslate"><span class="pre">aggregate_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.aggregate_periodic_data"><code class="docutils literal notranslate"><span class="pre">aggregate_periodic_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.aggregate_windowed_data"><code class="docutils literal notranslate"><span class="pre">aggregate_windowed_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.calculate_start_end"><code class="docutils literal notranslate"><span class="pre">calculate_start_end()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.check_period"><code class="docutils literal notranslate"><span class="pre">check_period()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.get_aggregation_windows"><code class="docutils literal notranslate"><span class="pre">get_aggregation_windows()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.get_stats_functions"><code class="docutils literal notranslate"><span class="pre">get_stats_functions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.aggregation_utils.is_daily_period"><code class="docutils literal notranslate"><span class="pre">is_daily_period()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosanalysis.dataset_builder">dataset_builder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.dataset_builder.add_covariates"><code class="docutils literal notranslate"><span class="pre">add_covariates()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.dataset_builder.add_start_stop_window"><code class="docutils literal notranslate"><span class="pre">add_start_stop_window()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.dataset_builder.build_analysis_dataset"><code class="docutils literal notranslate"><span class="pre">build_analysis_dataset()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.dataset_builder.build_dataset_on_frequency"><code class="docutils literal notranslate"><span class="pre">build_dataset_on_frequency()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.dataset_builder.build_dataset_on_timings"><code class="docutils literal notranslate"><span class="pre">build_dataset_on_timings()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-cosanalysis.preprocessing">preprocessing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.preprocessing.label_mappings"><code class="docutils literal notranslate"><span class="pre">label_mappings()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cosanalysis.preprocessing.processing"><code class="docutils literal notranslate"><span class="pre">processing()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model upload requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html#model-folder-example">Model folder example</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">COS-analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Useful functions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cosanalysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="useful-functions">
<h1>Useful functions<a class="headerlink" href="#useful-functions" title="Link to this heading"></a></h1>
<section id="read-device-data">
<h2>Read device data<a class="headerlink" href="#read-device-data" title="Link to this heading"></a></h2>
<section id="read-device-dataset">
<h3>read_device_dataset<a class="headerlink" href="#read-device-dataset" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_device_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_device_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Reads a pre-saved dataset, filtering by cohorts, participants and analysis set. The data of each participant is cleaned and concatenated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_type</strong> (<em>str</em>) – The type of device. Must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – The analysis set to use (‘ias’ or ‘eas’). Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of participant IDs to include in the dataset. Default is None, all participants for the dataset (ias or eas) are loaded.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the dataset of the identification set to load. Must be one of ‘Train’, ‘Test’, or ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of cohorts to load. Default is None, all cohorts are loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the filtered dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no file corresponding to the given parameters is found.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="read-diary">
<h2>Read diary<a class="headerlink" href="#read-diary" title="Link to this heading"></a></h2>
<section id="load-diaries">
<h3>load_diaries<a class="headerlink" href="#load-diaries" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">load_diaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_daily</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#load_diaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Load diaries related to a specific study concept and a defined window size, with the option to account for changes from baselines, and select the participants or cohorts to include.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>concept</strong> (<em>str</em>) – Concept to load. Must be one of ‘F’ (fatigue), ‘SQ’ (sleep quality), ‘DS’ (daytime sleepiness), ‘all’ (to load all three concepts), ‘confounders’ to load confounders (Anxiousness, Mood, Pain).</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – The timing of the questions that we want to load. Must be one of ‘intra_daily’, ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
<li><p><strong>agg_daily</strong> (<em>str</em><em>, </em><em>optional</em>) – function to aggregate diaries daily with. Default is “mean”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with diaries corresponding to the chosen parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the parameters are not correct.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="format-diaries">
<h3>format_diaries<a class="headerlink" href="#format-diaries" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">format_diaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_daily</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#format_diaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Load diaries choosing specific questions and with a defined window size, and the option to account for changes from baselines, and select the participants or cohorts to include.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>questions</strong> (<em>list</em><em> of </em><em>str</em>) – List of questions to load. Each must be one of “overall_fatigue_vas”, “physical_fatigue_vas”, “mental_fatigue_vas”, “sleep_quality_vas”, “KSS”, “PGIS-F”, “PGIC-F”, “PGIS-SQ”, “PGIC-SQ”, “PGIS-DS”, “PGIC-DS”, “anxiousness_vas”, “mood_vas”, “pain_vas”.</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – The timing of the questions that we want to load. Must be one of ‘intra_daily’, ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
<li><p><strong>agg_daily</strong> (<em>str</em><em>, </em><em>optional</em>) – function to aggregate diaries daily with. Default is “mean”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with diaries corresponding to the chosen parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the parameters are not correct.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-timings">
<h3>get_timings<a class="headerlink" href="#get-timings" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MAE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diaries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Get timings corresponding either to diaries, or to subjects for a specified timing (M, A, E, MAE, intra_daily or daily).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subjects</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of subjects to consider. Default is None, we return None if diaries is also None, there is no incidence if diaries is not None.</p></li>
<li><p><strong>timing</strong> (<em>str</em><em>, </em><em>optional</em>) – timing to load if diaries is not None. Must be one of “M”, “A”, “E”, “MAE”, “intra_daily”, “daily”. Default is “MAE”.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>diaries</strong> (<em>pandas.DataFrame</em>) – diaries to extract timings from (extract the following columns : [“subject_id”, “tup”, “tup_day”, “TIMING”, “Time”])</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with timings (contains the following columns : [“subject_id”, “tup”, “tup_day”, “TIMING”, “Time”])</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if timing not in [“M”, “A”, “E”, “MAE”, “intra_daily”, “daily”], or if subjects are not valid.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="read-ucam-data">
<h2>Read UCAM data<a class="headerlink" href="#read-ucam-data" title="Link to this heading"></a></h2>
<section id="get-demographics">
<h3>get_demographics<a class="headerlink" href="#get-demographics" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_demographics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_demographics"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Load demographics (COHORT, AGE, GENDER, BMI and TIMESINCEDIAG) for each subject.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the following columns : [“subject_id”, “COHORT”, “AGE”, “GENDER”, “BMI”, “TIMESINCEDIAG”].</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-tup-pros">
<h3>get_tup_PROs<a class="headerlink" href="#get-tup-pros" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_tup_PROs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_tup_PROs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>This function retrieves PROs data from the ADAM dataset ADPRO.
It allows filtering by version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>questions</strong> (<em>list</em><em> of </em><em>str</em>) – List of pros to load. Default is None. Each must be one of “FACITF-SCORE”, “SLPD4”, “KSS”, “fVAS”, “sqVAS”, “PGIS-F”, “PGIC-F”, “PGIS-SQ”, “PGIC-SQ”, “PGIS-DS”, “PGIC-DS”.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with TUP-based PROs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-baseline-pros">
<h3>get_baseline_PROs<a class="headerlink" href="#get-baseline-pros" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_baseline_PROs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_baseline_PROs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Get the baseline (value at Start of TUP 1) of PROs (FACITF-SCORE, KSS and SLPD4). This functions calls get_tup_PROs function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with the following columns: [“subject_id, “FACITF-SCORE_baseline_7days”, “KSS_baseline_7days”, “SLPD4_baseline_7days”]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="get-disease-score">
<h3>get_disease_score<a class="headerlink" href="#get-disease-score" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_disease_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_disease_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Get the diseases score for each patients of specified cohorts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with disease scores corresponding to each subject_id and tup.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If cohorts argument is invalid.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="aggregate-and-combine-data-for-analysis">
<h2>Aggregate and combine data for analysis<a class="headerlink" href="#aggregate-and-combine-data-for-analysis" title="Link to this heading"></a></h2>
<section id="build-analysis-dataset">
<h3>build_analysis_dataset<a class="headerlink" href="#build-analysis-dataset" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_analysis_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'around'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_analysis_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Build the analysis dataset by combining and aggregating device and diary datasets,
incorporating the covariates specified in the SAP (demographics, longitudinal covariates,
baselines of the PROs, and disease score if considering a single cohort),
with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze.
Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’,
‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>concept</strong> (<em>str</em>) – Must be one of ‘F’ (fatigue), ‘SQ’ (sleep quality), ‘DS’ (daytime sleepiness),
or ‘all’ (to load all concepts).</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – Specifies the timing of the questions we want to load.
Must be one of ‘intra_daily’ or ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, computes changes from baselines. Default is False.</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Statistics for aggregation. Default is None, which uses [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of the aggregation window in hours. Only useful if window_size is ‘intra_day’. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em><em>, </em><em>optional</em>) – Must be one of ‘before’, ‘around’, ‘after’. Default is ‘around’ (window_length/2 hours before, window_length/2 hours after).
Only useful if window_size is ‘intra_day’.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum proportion of non-missing values required in a group for aggregation. Default is 0.75 (in range [0, 1]).</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies whether the dataset to read should be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, specifies the dataset to load (‘Train’, ‘Test’, or ‘all’). Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of cohorts to consider. Default is None, meaning all cohorts are included.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset. Default is None, in which case the dataset is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The constructed analysis dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Combines device data and diary data based on timings and performs aggregation as specified by the parameters.</p></li>
<li><p>Covariates such as demographics, PROs, and disease scores are incorporated as specified in the SAP.</p></li>
<li><p>The function supports intra-day and daily window sizes and allows for the calculation of changes from baseline if requested.</p></li>
<li><p>The dataset is merged with diaries and saved (if specified) before being returned.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the cohorts or device_type are invalid.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="build-dataset-on-timings">
<h3>build_dataset_on_timings<a class="headerlink" href="#build-dataset-on-timings" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_dataset_on_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'around'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_dataset_on_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Build the analysis dataset by aggregating device data based on timings, with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze. Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>timings</strong> (<em>pandas.DataFrame</em>) – A DataFrame that must contain at least the following columns: [“subject_id”, “Time”, “tup”, “tup_day”, “TIMING”].</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of the aggregation window in hours. Only useful if <cite>setting</cite> is ‘intra_day’. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em><em>, </em><em>optional</em>) – Defines the timing window for intra-day aggregation. Must be one of ‘before’, ‘around’, or ‘after’. Default is ‘around’ (window_length/2 hours before, window_length/2 hours after).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The statistics to compute during aggregation. Default is None, in which case the aggregation is done with [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum proportion of non-missing values required for aggregation. Value between 0 and 1. Default is 0.75.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset to read must be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset. Default is None, in which case the dataset is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analysis dataset with device data aggregated based on the specified timings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>The function handles different window settings (‘before’, ‘around’, ‘after’) for intra-day aggregation.</p></li>
<li><p>Device data is aggregated based on timings and merged with the <cite>timings</cite> DataFrame.</p></li>
<li><p>Covariates (e.g., demographics, baseline PROs) are added to the final dataset by the <cite>add_covariates</cite> function.</p></li>
<li><p>The <cite>window_length</cite> parameter controls the length of the aggregation window for intra-day data.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the <cite>timings</cite> DataFrame is missing required columns, or if an invalid <cite>setting</cite> is provided.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="build-dataset-on-frequency">
<h3>build_dataset_on_frequency<a class="headerlink" href="#build-dataset-on-frequency" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_dataset_on_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_dataset_on_frequency"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Build the unsupervised dataset by aggregating device data based on frequency, incorporating specified covariates (e.g., demographics, longitudinal covariates, baseline PROs, and disease score for a single cohort), with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze. Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>period</strong> (<em>str</em><em>, </em><em>optional</em>) – The frequency of aggregation. Default is “D” (daily).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The statistics to compute during aggregation. Default is None, in which case the aggregation is done with [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of cohorts to consider. Default is None, which means all cohorts are considered.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – The minimum proportion of non-missing values required for aggregation. Value between 0 and 1. Default is 0.75.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset to read must be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, specifies the dataset to load (‘Train’, ‘Test’, or ‘all’). Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset to. If None, the dataset is not saved. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analysis dataset with device data aggregated on frequency, including covariates.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>The function handles different periods (e.g., daily or other frequencies) and adjusts the aggregation accordingly.</p></li>
<li><p>If a device type requires daily aggregation or other specific adjustments, those are handled within the function.</p></li>
<li><p>Covariates (e.g., demographics, baseline PROs) are added to the final dataset by the <cite>add_covariates</cite> function.</p></li>
<li><p>The final dataset can be saved to a local path if specified in the <cite>savepath</cite> argument.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If invalid device types, cohorts or periods are provided.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="processing">
<h3>processing<a class="headerlink" href="#processing" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.preprocessing.</span></span><span class="sig-name descname"><span class="pre">processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'z_score'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/preprocessing.html#processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Preprocess the given dataset by normalizing the data, encoding categorical variables,
and removing columns with no variability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – The input dataframe to be processed. It should contain the device data,
diary data, and possibly other columns for analysis.</p></li>
<li><p><strong>normalize</strong> (<em>{'z_score'</em><em>, </em><em>'min_max'</em><em>, </em><em>None}</em><em>, </em><em>optional</em>) – Specifies the normalization method to apply to the numerical columns:
- ‘z_score’: Normalize using z-score (standardization).
- ‘min_max’: Normalize using Min-Max scaling.
- None: No normalization applied.
Default is ‘z_score’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A processed dataframe with the specified normalization applied, categorical variables
encoded, and columns with no variability removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>normalize</cite> parameter is not one of [‘z_score’, ‘min_max’, None].</p>
</dd>
<dt class="field-odd">Note<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Non-numeric columns such as <cite>subject_id</cite>, <cite>tup</cite>, <cite>tup_day</cite>, <cite>start_window</cite> and <cite>stop_window</cite> are excluded from normalization.</p></li>
<li><p>Categorical columns are mapped to numeric values (e.g., ‘GENDER’, ‘COHORT’) using a predefined
mapping in the <cite>label_mappings</cite> function.</p></li>
<li><p>One-hot encoding is performed on columns starting with certain prefixes, such as
<cite>VIT_PostureCategory_1min</cite>, <cite>mcr_class</cite>, and <cite>mcl_class</cite>.</p></li>
<li><p>Any columns with constant values (no variability) are dropped before returning the result.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="upload-a-model-and-run-inferences">
<h2>Upload a model and run inferences<a class="headerlink" href="#upload-a-model-and-run-inferences" title="Link to this heading"></a></h2>
<section id="upload-model">
<h3>upload_model<a class="headerlink" href="#upload-model" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_manager.</span></span><span class="sig-name descname"><span class="pre">upload_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_manager.html#upload_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Upload model to the DMP. This function also checks the validity of the folder before proceeding to the upload.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the folder with the model to upload.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the upload was a success.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>This function calls check_files, check_used_function and test_run_inference from model_utils to check if the folder is ready to be uploaded. If not, an error will be raised by those functions.</p></li>
<li><p>The folder is compressed into a zip file. That zip file is the file that will be uploaded to the DMP.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="run-inference-on-analysis-set">
<h3>run_inference_on_analysis_set<a class="headerlink" href="#run-inference-on-analysis-set" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_manager.</span></span><span class="sig-name descname"><span class="pre">run_inference_on_analysis_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./models'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_manager.html#run_inference_on_analysis_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Run inference on a chosen analysis set. For cohort specific models, we will only be able to test on participants of the specific cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_id</strong> (<em>str</em>) – ID of the model on the DMP.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Version of the data to use.</p></li>
<li><p><strong>model_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to save the model folder to. Default is “./models” : model is stored in the folder models at the current path.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em>) – Cohorts to run inferences on. Default is None : we test on all cohorts (except if this is a cohort specific model).</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Analysis set to run inferences on. Either ‘ias’ or ‘eas’. Default is ‘ias’</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – Case where analysis_set = ‘ias’. Indicates whether to run inferences on train set, test set or both. Must be one of ‘Train’, ‘Test’, ‘all’. Default is ‘Train’.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to save the predictions to. Default is None : the predictions dataset will not be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with the predictions corresponding to the analysis set in parameter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><p>This function raises ValueError in case analysis_set or ias_dataset are not valid.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="compute-rmse">
<h3>compute_rmse<a class="headerlink" href="#compute-rmse" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.performance_metrics.</span></span><span class="sig-name descname"><span class="pre">compute_rmse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/performance_metrics.html#compute_rmse"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Compute rmse on a prediction csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predictions</strong> (<em>pandas.DataFrame</em>) – DataFrame with the predictions.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>RMSE</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>
<section id="cosanalysis-package-all-functions">
<h1>cosanalysis package - all functions<a class="headerlink" href="#cosanalysis-package-all-functions" title="Link to this heading"></a></h1>
<section id="dataset-manager">
<h2>dataset_manager<a class="headerlink" href="#dataset-manager" title="Link to this heading"></a></h2>
<section id="module-cosanalysis.dataset_manager.device_data_manager">
<span id="device-data-manager"></span><h3>device_data_manager<a class="headerlink" href="#module-cosanalysis.dataset_manager.device_data_manager" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.get_AX_location">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">get_AX_location</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#get_AX_location"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.get_AX_location" title="Link to this definition"></a></dt>
<dd><p>Determine the device location (wrist or back).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_id</strong> (<em>str</em>) – The unique identifier of the file to process.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string indicating the device location (“wrist” or “back”).
Returns “unknown” if the location cannot be determined or an error occurs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If the file cannot be read or processed, the exception is caught and logged.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.load_and_save_device_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">load_and_save_device_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upload</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#load_and_save_device_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.load_and_save_device_dataset" title="Link to this definition"></a></dt>
<dd><p>Reads, concatenates, cleans, and optionally uploads a device dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_type</strong> (<em>str</em>) – The type of device. Must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>upload</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to upload the cleaned dataset. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – The analysis set to use (‘ias’ or ‘eas’). Default is ‘ias’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the cleaned dataset, or None if no data is available after cleaning.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.read_data_from_archive">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_data_from_archive</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">record_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_regex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">','</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_data_from_archive"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.read_data_from_archive" title="Link to this definition"></a></dt>
<dd><p>Extract and read a specific file from a compressed archive.</p>
<p>This function searches for a file within a ZIP archive that matches a given regex pattern,
reads its content, and returns it as a DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>record_id</strong> (<em>str</em>) – The unique identifier of the archive to process.</p></li>
<li><p><strong>file_regex</strong> (<em>str</em>) – The regular expression pattern to match the desired file inside the archive.</p></li>
<li><p><strong>sep</strong> (<em>str</em><em>, </em><em>optional</em>) – The delimiter used in the file to separate values (default is “,”).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the data from the matched file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If no file matching the regex is found in the archive.</p></li>
<li><p><strong>UnicodeDecodeError</strong> – If the file content cannot be decoded using UTF-8.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.read_device_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_device_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_device_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.read_device_dataset" title="Link to this definition"></a></dt>
<dd><p>Reads a pre-saved dataset, filtering by cohorts, participants and analysis set. The data of each participant is cleaned and concatenated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_type</strong> (<em>str</em>) – The type of device. Must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – The analysis set to use (‘ias’ or ‘eas’). Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of participant IDs to include in the dataset. Default is None, all participants for the dataset (ias or eas) are loaded.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the dataset of the identification set to load. Must be one of ‘Train’, ‘Test’, or ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of cohorts to load. Default is None, all cohorts are loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the filtered dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no file corresponding to the given parameters is found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.read_device_records">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_device_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_device_records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.read_device_records" title="Link to this definition"></a></dt>
<dd><p>Retrieves records with the digital measures of a specific device.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> (<em>str</em>) – The type of device. Must be one of ‘SLP’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR’, ‘COG’.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – The version of the data to retrieve.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em>) – The analysis set to use (‘ias’ or ‘eas’)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the device records.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.read_record">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_dates</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_record"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.read_record" title="Link to this definition"></a></dt>
<dd><p>Reads a specific device record based on the provided parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<em>pandas Series</em>) – A row containing the record information.</p></li>
<li><p><strong>device_type</strong> (<em>str</em>) – The type of device. Must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>tup_dates</strong> (<em>pandas.DataFrame</em>) – DataFrame containing Tup dates for the records.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame containing the read data from the archive matching the specified parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> – If there is an error while reading the data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.device_data_manager.read_record_wrapper">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.device_data_manager.</span></span><span class="sig-name descname"><span class="pre">read_record_wrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_dates</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/device_data_manager.html#read_record_wrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.device_data_manager.read_record_wrapper" title="Link to this definition"></a></dt>
<dd><p>A wrapper function to handle dictionary input for multiprocessing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row_dict</strong> (<em>dict</em>) – A dictionary containing record information.</p></li>
<li><p><strong>device_type</strong> (<em>str</em>) – The type of device (e.g., ‘SLP_night’, ‘STS’, etc.).</p></li>
<li><p><strong>tup_dates</strong> (<em>pd.DataFrame</em>) – DataFrame containing Tup dates for the records.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Data read from the archive matching the specified parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.dataset_manager.diaries_manager">
<span id="diaries-manager"></span><h3>diaries_manager<a class="headerlink" href="#module-cosanalysis.dataset_manager.diaries_manager" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.assign_season">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">assign_season</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#assign_season"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.assign_season" title="Link to this definition"></a></dt>
<dd><p>Find the season corresponding to a date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>date</strong> (<em>datetime</em>) – Date to assign a season to.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Season (Spring, Summer, Fall or Winter)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.expand_row">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">expand_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#expand_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.expand_row" title="Link to this definition"></a></dt>
<dd><p>Get a DataFrame with a row for each day between the start_date and end_date. Useful only if TIMING is daily.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>row</strong> (<em>pandas.Series</em>) – Row containing “subject_id”, “tup”, “start_date” and “stop_date” information.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with all dates in the range, containing the following columns [“subject_id”, “Time”, “TIMING”, “tup”, “tup_day”]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.format_diaries">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">format_diaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_daily</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#format_diaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.format_diaries" title="Link to this definition"></a></dt>
<dd><p>Load diaries choosing specific questions and with a defined window size, and the option to account for changes from baselines, and select the participants or cohorts to include.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>questions</strong> (<em>list</em><em> of </em><em>str</em>) – List of questions to load. Each must be one of “overall_fatigue_vas”, “physical_fatigue_vas”, “mental_fatigue_vas”, “sleep_quality_vas”, “KSS”, “PGIS-F”, “PGIC-F”, “PGIS-SQ”, “PGIC-SQ”, “PGIS-DS”, “PGIC-DS”, “anxiousness_vas”, “mood_vas”, “pain_vas”.</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – The timing of the questions that we want to load. Must be one of ‘intra_daily’, ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
<li><p><strong>agg_daily</strong> (<em>str</em><em>, </em><em>optional</em>) – function to aggregate diaries daily with. Default is “mean”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with diaries corresponding to the chosen parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the parameters are not correct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_baseline_PROs">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_baseline_PROs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_baseline_PROs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_baseline_PROs" title="Link to this definition"></a></dt>
<dd><p>Get the baseline (value at Start of TUP 1) of PROs (FACITF-SCORE, KSS and SLPD4). This functions calls get_tup_PROs function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with the following columns: [“subject_id, “FACITF-SCORE_baseline_7days”, “KSS_baseline_7days”, “SLPD4_baseline_7days”]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_baselines">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_baselines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filtered_diary</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_baselines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_baselines" title="Link to this definition"></a></dt>
<dd><p>Get the baselines from a diary that is already filtered with its window size.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filtered_diaries</strong> (<em>pandas.DataFrame</em>) – DataFrame with either daily or intra_daily diaries.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with the following columns: subject_id, TIMING and the baselines (mean values of diary questions during TUP 1).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_daily_diaries">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_daily_diaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diary</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_daily</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_daily_diaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_daily_diaries" title="Link to this definition"></a></dt>
<dd><p>Get the average of morning, afternoon, or evening diaries answered for each subject and day
only if exactly 3 diaries were answered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diary</strong> (<em>pandas.DataFrame</em>) – initial diary with 3 times a day answers.</p></li>
<li><p><strong>agg_daily</strong> (<em>str</em>) – function to aggregate diaries daily with</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with the daily aggregated diaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_demographics">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_demographics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_demographics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_demographics" title="Link to this definition"></a></dt>
<dd><p>Load demographics (COHORT, AGE, GENDER, BMI and TIMESINCEDIAG) for each subject.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the following columns : [“subject_id”, “COHORT”, “AGE”, “GENDER”, “BMI”, “TIMESINCEDIAG”].</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_disease_score">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_disease_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_disease_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_disease_score" title="Link to this definition"></a></dt>
<dd><p>Get the diseases score for each patients of specified cohorts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with disease scores corresponding to each subject_id and tup.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If cohorts argument is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_longitudinal_covariates">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_longitudinal_covariates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_longitudinal_covariates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_longitudinal_covariates" title="Link to this definition"></a></dt>
<dd><p>Load longitudinal covariates (Day_Type, Season) for each subject_id, Date.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – DataFrame containing “subject_id” and “Date” columns.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with the following columns [“subject_id”, “Date”, “Season”, “Day_Type”]</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_questions_dict">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_questions_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_questions_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_questions_dict" title="Link to this definition"></a></dt>
<dd><p>Get a dictionary thats associates each diary question to its name in the ADAM dataset and the number of times the question is asked per day.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary of questions.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_timings">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subjects</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MAE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diaries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_timings" title="Link to this definition"></a></dt>
<dd><p>Get timings corresponding either to diaries, or to subjects for a specified timing (M, A, E, MAE, intra_daily or daily).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subjects</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of subjects to consider. Default is None, we return None if diaries is also None, there is no incidence if diaries is not None.</p></li>
<li><p><strong>timing</strong> (<em>str</em><em>, </em><em>optional</em>) – timing to load if diaries is not None. Must be one of “M”, “A”, “E”, “MAE”, “intra_daily”, “daily”. Default is “MAE”.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>diaries</strong> (<em>pandas.DataFrame</em>) – diaries to extract timings from (extract the following columns : [“subject_id”, “tup”, “tup_day”, “TIMING”, “Time”])</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with timings (contains the following columns : [“subject_id”, “tup”, “tup_day”, “TIMING”, “Time”])</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – if timing not in [“M”, “A”, “E”, “MAE”, “intra_daily”, “daily”], or if subjects are not valid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.get_tup_PROs">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">get_tup_PROs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#get_tup_PROs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.get_tup_PROs" title="Link to this definition"></a></dt>
<dd><p>This function retrieves PROs data from the ADAM dataset ADPRO.
It allows filtering by version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>questions</strong> (<em>list</em><em> of </em><em>str</em>) – List of pros to load. Default is None. Each must be one of “FACITF-SCORE”, “SLPD4”, “KSS”, “fVAS”, “sqVAS”, “PGIS-F”, “PGIC-F”, “PGIS-SQ”, “PGIC-SQ”, “PGIS-DS”, “PGIC-DS”.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with TUP-based PROs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.load_diaries">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">load_diaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agg_daily</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#load_diaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.load_diaries" title="Link to this definition"></a></dt>
<dd><p>Load diaries related to a specific study concept and a defined window size, with the option to account for changes from baselines, and select the participants or cohorts to include.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>concept</strong> (<em>str</em>) – Concept to load. Must be one of ‘F’ (fatigue), ‘SQ’ (sleep quality), ‘DS’ (daytime sleepiness), ‘all’ (to load all three concepts), ‘confounders’ to load confounders (Anxiousness, Mood, Pain).</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – The timing of the questions that we want to load. Must be one of ‘intra_daily’, ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, we load the Train set, the Test set or both. Must be one of ‘Train’, ‘Test’ and ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of the cohorts to consider. Default is None, we consider them all.</p></li>
<li><p><strong>agg_daily</strong> (<em>str</em><em>, </em><em>optional</em>) – function to aggregate diaries daily with. Default is “mean”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with diaries corresponding to the chosen parameters.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the parameters are not correct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.map_tup">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">map_tup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tup_value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#map_tup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.map_tup" title="Link to this definition"></a></dt>
<dd><p>Associates a string containing a “TUP” statement with the corresponding integer. ex: TUP 1 -&gt; 1</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tup_value</strong> (<em>str</em>) – String to be analyzed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An integer corresponding to the number found in the string (1 to 4) or None if no match is found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.diaries_manager.read_adam_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.diaries_manager.</span></span><span class="sig-name descname"><span class="pre">read_adam_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/diaries_manager.html#read_adam_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.diaries_manager.read_adam_dataset" title="Link to this definition"></a></dt>
<dd><p>Reads adam dataset that is saved on the DMP for a given version, filtering by cohorts, participants and analysis set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_type</strong> (<em>str</em>) – The type of the data we want to load.
Must be one of : [“ADDI”, “ADSL”, “ADCL”, “ADPRO”]</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset should include imputation data. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – The analysis set to use (‘ias’ or ‘eas’). Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of participant IDs to include in the dataset. Default is None, all participants for the dataset (ias or eas) are loaded.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the dataset of the identification set to load. Must be one of ‘Train’, ‘Test’, or ‘all’. Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of cohorts to load. Default is None, all cohorts are loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame containing the filtered dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no file corresponding to the given parameters is found.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.dataset_manager.utils">
<span id="utils"></span><h3>utils<a class="headerlink" href="#module-cosanalysis.dataset_manager.utils" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.add_tup_day">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">add_tup_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tup'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'subject_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Time'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#add_tup_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.add_tup_day" title="Link to this definition"></a></dt>
<dd><p>Add a column with the day number within the TUP.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Input DataFrame to add the tup_day column to.</p></li>
<li><p><strong>tup_dates</strong> (<em>str</em><em>, </em><em>optional</em>) – DataFrame with the start and stop dates of each patients tups.</p></li>
<li><p><strong>tup_header</strong> – Name of the TUP column. Default is “tup”.</p></li>
<li><p><strong>subject_header</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the subject ID column. Default is “subject_id”.</p></li>
<li><p><strong>time_header</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of the time column. Default is “Time”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Input DataFrame with column tup_day</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.add_tups">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">add_tups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_days_before</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag_days_after</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tup_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tup'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subject_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'subject_id'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Time'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#add_tups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.add_tups" title="Link to this definition"></a></dt>
<dd><p>Add a column TUP to the input vtp_records dataframe with
the corresponding TUP.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – input dataframe where TUP mapping is applied</p></li>
<li><p><strong>lag_days_before</strong> (<em>int</em>) – nb of allowed days before TUP starts</p></li>
<li><p><strong>lag_days_after</strong> (<em>int</em>) – nb of allowed days after TUP ends</p></li>
<li><p><strong>tup_header</strong> (<em>str</em>) – Name of TUP column to be added in input data</p></li>
<li><p><strong>subject_header</strong> (<em>str</em>) – Participant header in input data</p></li>
<li><p><strong>time_header</strong> (<em>str</em>) – Time header in input data</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Input Dataframe with column TUP</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_cohorts">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_cohorts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cohorts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_cohorts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_cohorts" title="Link to this definition"></a></dt>
<dd><p>Check if the cohorts are valid. Each must be one of [“HV”, “PD”, “HD”, “IBD”, “SLE”, “PSS”, “RA”].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cohorts</strong> (<em>List</em><em> of </em><em>str</em>) – Cohorts to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The cohorts list.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If cohorts is not a list of string or if there is an invalid cohort in the list.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_participants">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_participants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">participants</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_participants"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_participants" title="Link to this definition"></a></dt>
<dd><p>Check if the participants is in the right format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>participants</strong> (<em>str</em><em>, </em><em>list</em><em> of </em><em>str</em><em> or </em><em>None.</em>) – Parameter to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None if participants is None, and a list of participants if the format is correct.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of str or None</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If participants is not a string, a list of string or None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_adam">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_adam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_adam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_adam" title="Link to this definition"></a></dt>
<dd><p>Check if the device_type is among valid device types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_type</strong> (<em>str</em>) – adam dataset type to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>data type if it is valid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the data type is not among valid data types.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_dataset" title="Link to this definition"></a></dt>
<dd><p>Check if dataset is either ‘ias’ or ‘eas’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>str</em>) – Parameter to check. Must be either ‘ias’ or ‘eas’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dataset if no error was raised.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If dataset is neither ‘ias’ nor ‘eas’ or (temporary) if dataset is ‘eas’ (forbidden access).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_device">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_device"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_device" title="Link to this definition"></a></dt>
<dd><p>Check if the device_type is among valid device types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device_type</strong> (<em>str</em>) – Device type to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Device type if it is valid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the device type is not among valid device types.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_devices">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_devices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_devices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_devices" title="Link to this definition"></a></dt>
<dd><p>Check if all device_types are among valid device types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device_types</strong> – Device types to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Device types if they are valid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If device_types is not a string or a list of string, and if there is an invalid device type in device_types.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_ias_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_ias_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_ias_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_ias_dataset" title="Link to this definition"></a></dt>
<dd><p>Check if ias_dataset is either ‘Train’, ‘Test’ or ‘all’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ias_dataset</strong> (<em>str</em>) – Parameter to check. Must be either ‘Train’, ‘Test’ or ‘all’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ias_dataset if no error was raised.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If ias_dataset is not in [‘Train’, ‘Test’, ‘all’].</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.check_valid_type">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">check_valid_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#check_valid_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.check_valid_type" title="Link to this definition"></a></dt>
<dd><p>Check if data_type parameter is among valid data types:</p>
<p>Valid data types:
[“ADDI”, “ADSL”, “ADCL”, “ADPRO”, “SLP_night”, “STS”, “HRV”,
“VIT”, “GVA”, “MCR_MCR”, “MCR_MCL”, “COG_pvt”, “COG_dst”]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_type</strong> (<em>str</em>) – The data type to check.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the data_type is not valid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.get_device_measures">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">get_device_measures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#get_device_measures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.get_device_measures" title="Link to this definition"></a></dt>
<dd><p>Retrieves the device measures from a given dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>pandas.DataFrame</em>) – The input DataFrame containing device data, where the column names represent various device measures.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of column names from the input DataFrame that correspond to device measures.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><p>The matching is case-insensitive and uses the starting substring match.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.get_tup_dates">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">get_tup_dates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#get_tup_dates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.get_tup_dates" title="Link to this definition"></a></dt>
<dd><p>Get the tup start and stop dates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A DataFrame with the start and stop dates for each TUP of each subject.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.get_valid_devices">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">get_valid_devices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#get_valid_devices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.get_valid_devices" title="Link to this definition"></a></dt>
<dd><p>Get all valid device types.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of valid device types.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.get_version_id">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">get_version_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#get_version_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.get_version_id" title="Link to this definition"></a></dt>
<dd><p>Get version ID corresponding to a version tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version tag corresponding to the version_id we want to find. Default is None : the version_id returned is also None.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The corresponding version_id if version is not None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str, optional</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the version does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.read_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">read_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#read_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.read_dataset" title="Link to this definition"></a></dt>
<dd><p>Read a dataset that is saved on the DMP, chosing the data_type, the version, if the dataset is imputed and the analysis set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_type</strong> (<em>str</em>) – The type of the data we want to load.
Must be one of :
[“ADDI”, “ADSL”, “ADCL”, “ADPRO”, “SLP_night”, “STS”, “HRV”,
“VIT”, “GVA”, “MCR_MCR”, “MCR_MCL”, “COG_pvt”, “COG_dst”]</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we load the imputed dataset. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” (identification) or “eas” (evaluation). Default is “ias”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The pre-saved dataset with the required properties.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no file is found (probably a permission issue) or if no file_id corresponds to the version, imputation and analysis_set given.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.utils.upload_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.utils.</span></span><span class="sig-name descname"><span class="pre">upload_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/utils.html#upload_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.utils.upload_dataset" title="Link to this definition"></a></dt>
<dd><p>Upload a dataset on the DMP, with the field id {data_type}_agg.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>pandas.DataFramr</em>) – Dataset to upload.</p></li>
<li><p><strong>data_type</strong> (<em>str</em>) – The type of the data we want to upload.
Must be one of :
[“ADDI”, “ADSL”, “ADCL”, “ADPRO”, “SLP_night”, “STS”, “HRV”,
“VIT”, “GVA”, “MCR_MCR”, “MCR_MCL”, “COG_pvt”, “COG_dst”]</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to use. Default is None.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, we load the imputed dataset. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” (identification) or “eas” (evaluation). Default is “ias”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the upload process.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.dataset_manager.adam_dataset">
<span id="adam-dataset"></span><h3>adam_dataset<a class="headerlink" href="#module-cosanalysis.dataset_manager.adam_dataset" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_manager.adam_dataset.fetch_adam_data">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_manager.adam_dataset.</span></span><span class="sig-name descname"><span class="pre">fetch_adam_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datasets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['ADSL',</span> <span class="pre">'ADPRO',</span> <span class="pre">'ADCL',</span> <span class="pre">'ADDI']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ISA'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_manager/adam_dataset.html#fetch_adam_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_manager.adam_dataset.fetch_adam_data" title="Link to this definition"></a></dt>
<dd><p>Fetch ADAM datasets from the DMP using the dmpy function fetch_adam_data.
ADSL: Demographics data and TUP dates
ADPRO: Weekly PROs
ADCL: Clinical scores
ADDI: Diary data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datasets</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em>) – Type of datasets we want to load. Must be among “ADSL”, “ADPRO”, “ADCL” and “ADDI”.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Version of the data to load. Default is None.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Either ISA or ESA (identification or evaluation dataset). Default is ISA.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="model-manager">
<h2>model_manager<a class="headerlink" href="#model-manager" title="Link to this heading"></a></h2>
<section id="id1">
<h3>model_manager<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<dl class="py function" id="module-cosanalysis.model_manager.model_manager">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_manager.run_inference_on_analysis_set">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_manager.</span></span><span class="sig-name descname"><span class="pre">run_inference_on_analysis_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./models'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_manager.html#run_inference_on_analysis_set"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_manager.run_inference_on_analysis_set" title="Link to this definition"></a></dt>
<dd><p>Run inference on a chosen analysis set. For cohort specific models, we will only be able to test on participants of the specific cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_id</strong> (<em>str</em>) – ID of the model on the DMP.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Version of the data to use.</p></li>
<li><p><strong>model_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to save the model folder to. Default is “./models” : model is stored in the folder models at the current path.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em>) – Cohorts to run inferences on. Default is None : we test on all cohorts (except if this is a cohort specific model).</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Analysis set to run inferences on. Either ‘ias’ or ‘eas’. Default is ‘ias’</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – Case where analysis_set = ‘ias’. Indicates whether to run inferences on train set, test set or both. Must be one of ‘Train’, ‘Test’, ‘all’. Default is ‘Train’.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to save the predictions to. Default is None : the predictions dataset will not be saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with the predictions corresponding to the analysis set in parameter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><p>This function raises ValueError in case analysis_set or ias_dataset are not valid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_manager.upload_model">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_manager.</span></span><span class="sig-name descname"><span class="pre">upload_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_manager.html#upload_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_manager.upload_model" title="Link to this definition"></a></dt>
<dd><p>Upload model to the DMP. This function also checks the validity of the folder before proceeding to the upload.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the folder with the model to upload.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the upload was a success.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>This function calls check_files, check_used_function and test_run_inference from model_utils to check if the folder is ready to be uploaded. If not, an error will be raised by those functions.</p></li>
<li><p>The folder is compressed into a zip file. That zip file is the file that will be uploaded to the DMP.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.model_manager.model_utils">
<span id="model-utils"></span><h3>model_utils<a class="headerlink" href="#module-cosanalysis.model_manager.model_utils" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.check_files">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">check_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#check_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.check_files" title="Link to this definition"></a></dt>
<dd><p>Check the structure and content of a folder with inference files.
The following checks are made :</p>
<ul class="simple">
<li><p>Ensure the directory exists</p></li>
<li><p>Check if config.json and inference.py files exist</p></li>
<li><p>Check if there is a model file in the directory (the name of the file must be model)</p></li>
<li><p>Check if the JSON file is correct and contains the right arguments</p></li>
<li><p>Check if the run_inference function exists in inference.py</p></li>
<li><p>Check the parameters of the run_inference function in inference.py</p></li>
<li><p>Check if inference.py contains no syntax error</p></li>
<li><p>Check there is no image or csv file in the folder</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the folder with inference files.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if there is no Error raised.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Error</strong> – If a check is not passed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.check_json">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">check_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#check_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.check_json" title="Link to this definition"></a></dt>
<dd><p>Check if the JSON files contains the required arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config_data</strong> (<em>dict</em>) – Data of the json file to check.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the JSON file is correct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.check_output">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">check_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#check_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.check_output" title="Link to this definition"></a></dt>
<dd><p>Check the output of the run_inference function in inference.py. The first columns must be [‘subject_id’, ‘tup’, ‘tup_day’, ‘Date’, ‘TIMING’].
The last column must be the prediction column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predictions</strong> (<em>pandas.DataFrame</em>) – DataFrame corresponding to the output of the run_inference function of the inference.py file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the output is in the correct format.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the columns of the DataFrame are not the expected ones.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.check_used_function">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">check_used_function</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#check_used_function"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.check_used_function" title="Link to this definition"></a></dt>
<dd><p>Check that the <cite>build_analysis_dataset</cite> function is not used in inference.py file
in the given directory (to ensure the target is not used to predict).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the directory containing inference.py.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if <cite>build_analysis_dataset</cite> is not used.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>build_analysis_dataset</cite> is used.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.fetch_true_target_values">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">fetch_true_target_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#fetch_true_target_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.fetch_true_target_values" title="Link to this definition"></a></dt>
<dd><p>Fetch the real values corresponding to the timings of the predictions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predictions</strong> (<em>pandas.DataFrame</em>) – DataFrame with the columns : subject_id, tup, Date, TIMING, prediction</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The input DataFrame with the column true_{target_name} corresponding to the real values of the target, and the target name.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of a pandas.DataFrame and a str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.parse_json">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">parse_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#parse_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.parse_json" title="Link to this definition"></a></dt>
<dd><p>Parse the config.json file in the directory_path directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the folder with config.json file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Data of the config.json file</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.run_inference">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">run_inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">participants</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#run_inference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.run_inference" title="Link to this definition"></a></dt>
<dd><p>Run inference on participants using the run_inference function from directory_path/inference.py</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>participants</strong> (<em>list</em><em> of </em><em>str</em>) – List of participants to run inferences on.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Version of the data to use.</p></li>
<li><p><strong>directory_path</strong> (<em>str</em>) – Path to the folder with inference files.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Predictions for each participants.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If there is an error while running inferences.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.model_utils.test_run_inference">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.model_utils.</span></span><span class="sig-name descname"><span class="pre">test_run_inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/model_utils.html#test_run_inference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.model_utils.test_run_inference" title="Link to this definition"></a></dt>
<dd><p>Check that the run_inference function in inference.py runs on a subject of
the training set of the cohorts specified in the JSON file.
This function also checks the format of the output of the function, and
that the timing of the output corresponds to the window_size specified in the JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory_path</strong> (<em>str</em>) – Path to the directory containing inference.py.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if all checks are passed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If there is an error during checks.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.model_manager.performance_metrics">
<span id="performance-metrics"></span><h3>performance_metrics<a class="headerlink" href="#module-cosanalysis.model_manager.performance_metrics" title="Link to this heading"></a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.model_manager.performance_metrics.compute_rmse">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.model_manager.performance_metrics.</span></span><span class="sig-name descname"><span class="pre">compute_rmse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/model_manager/performance_metrics.html#compute_rmse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.model_manager.performance_metrics.compute_rmse" title="Link to this definition"></a></dt>
<dd><p>Compute rmse on a prediction csv file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>predictions</strong> (<em>pandas.DataFrame</em>) – DataFrame with the predictions.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>RMSE</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-cosanalysis.aggregation">
<span id="aggregation"></span><h2>aggregation<a class="headerlink" href="#module-cosanalysis.aggregation" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation.aggregate_device_data_on_frequency">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation.</span></span><span class="sig-name descname"><span class="pre">aggregate_device_data_on_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation.html#aggregate_device_data_on_frequency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation.aggregate_device_data_on_frequency" title="Link to this definition"></a></dt>
<dd><p>Aggregates device data based on a specific frequency period (e.g., daily, hourly, etc.).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_dataset</strong> (<em>pandas.DataFrame</em>) – The dataset containing device data to be aggregated.</p></li>
<li><p><strong>period</strong> (<em>str</em><em>, </em><em>optional</em>) – The frequency period for aggregation (e.g., ‘D’ for daily, ‘H’ for hourly).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of statistics to apply to the continuous columns (e.g., [‘mean’, ‘std’]). Default is None, which uses [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – The threshold for including data based on duration. Default is 0.75.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dataframe with aggregated device data based on the specified frequency.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Aggregates data based on device type (e.g., “mcl”, “sts”, “VIT”).</p></li>
<li><p>Includes functionality to handle transitions, class aggregations, and event counts.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation.aggregate_device_data_on_timings">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation.</span></span><span class="sig-name descname"><span class="pre">aggregate_device_data_on_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'around'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation.html#aggregate_device_data_on_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation.aggregate_device_data_on_timings" title="Link to this definition"></a></dt>
<dd><p>Aggregates device data based on specific time windows and other criteria,
adjusting for periodicities and categorical classifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_dataset</strong> (<em>pandas.DataFrame</em>) – The dataset containing device data to be aggregated.</p></li>
<li><p><strong>timings</strong> (<em>pandas.DataFrame</em>) – A dataframe containing the timing information used for aggregation.</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – The length of the window (in hours) for data aggregation. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em><em>, </em><em>optional</em>) – Defines whether to aggregate data “around” or “before” or “after” a given timing. Default is “around”.</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – A list of statistics to apply to the continuous columns (e.g., [‘mean’, ‘std’]). Default is None, which uses [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – The threshold for including data based on duration. Default is 0.75.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dataframe with aggregated device data based on the specified time windows.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Aggregates based on device type (e.g., “mcl”, “sts”, “VIT”).</p></li>
<li><p>Incorporates additional functions and custom transformations based on the device type.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation.get_device_type">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation.</span></span><span class="sig-name descname"><span class="pre">get_device_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation.html#get_device_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation.get_device_type" title="Link to this definition"></a></dt>
<dd><p>Identifies the device type based on the column names in the provided dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>device_dataset</strong> (<em>pandas.DataFrame</em>) – The dataset containing device data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The device type, inferred from column names.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str or None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.aggregation_utils">
<span id="aggregation-utils"></span><h2>aggregation_utils<a class="headerlink" href="#module-cosanalysis.aggregation_utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.aggregate_data">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">aggregate_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continuous_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#aggregate_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.aggregate_data" title="Link to this definition"></a></dt>
<dd><p>Aggregate data by applying statistical functions to categorical and continuous columns.</p>
<p>This function computes statistical summaries for continuous and categorical columns in each group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<em>GroupBy object</em>) – The grouped DataFrame to aggregate.</p></li>
<li><p><strong>categorical_columns</strong> (<em>list</em><em> of </em><em>str</em>) – List of categorical columns for which aggregation is to be performed.</p></li>
<li><p><strong>continuous_columns</strong> (<em>list</em><em> of </em><em>str</em>) – List of continuous columns for which aggregation is to be performed.</p></li>
<li><p><strong>stats</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of statistical functions to apply (e.g., “mean”, “max”).</p></li>
<li><p><strong>custom_functions</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of custom functions to apply to specific columns.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated DataFrame containing the computed statistics.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.aggregate_periodic_data">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">aggregate_periodic_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_start_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_stop_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continuous_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#aggregate_periodic_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.aggregate_periodic_data" title="Link to this definition"></a></dt>
<dd><p>Aggregate dataset by period.</p>
<p>This function aggregates data into specified periods, such as daily, weekly, etc.,
and computes statistical functions on both categorical and continuous columns.</p>
<p>offset, period, and origin defined here:
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases">https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Input DataFrame to be aggregated.</p></li>
<li><p><strong>time_header</strong> (<em>str</em>) – Name of the column containing the time values.</p></li>
<li><p><strong>window_start_header</strong> (<em>str</em>) – Name of the column where the start time of the window will be stored.</p></li>
<li><p><strong>window_stop_header</strong> (<em>str</em>) – Name of the column where the stop time of the window will be stored.</p></li>
<li><p><strong>categorical_columns</strong> (<em>list</em><em> of </em><em>str</em>) – List of column names representing categorical data for aggregation.</p></li>
<li><p><strong>continuous_columns</strong> – List of column names representing continuous data for aggregation.</p></li>
<li><p><strong>period</strong> (<em>str</em>) – The period for aggregation (e.g., “D” for day, “W” for week, etc.). Default is “D”.</p></li>
<li><p><strong>freq</strong> (<em>float</em><em>, </em><em>optional</em>) – Frequency of data, used to filter groups based on coverage. Default is None.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Proportion of non-missing values required for aggregation to occur in each group. Default is 0.75.</p></li>
<li><p><strong>offset</strong> (<em>str</em><em>, </em><em>optional</em>) – Offset to be applied to the period (e.g., “+1D”).</p></li>
<li><p><strong>origin</strong> (<em>str</em><em>, </em><em>optional</em>) – The reference date for the aggregation (e.g., ‘start’, ‘epoch’).</p></li>
<li><p><strong>by</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Column or columns by which to group the data.</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of statistical functions to apply (e.g., “mean”, “std”).</p></li>
<li><p><strong>additional_functions</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of custom functions to apply to specific columns.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated DataFrame with statistical summaries for each group.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.aggregate_windowed_data">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">aggregate_windowed_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_windows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_start_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_stop_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">categorical_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">continuous_columns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_functions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#aggregate_windowed_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.aggregate_windowed_data" title="Link to this definition"></a></dt>
<dd><p>Aggregate dataset by windows defined in df_windows DataFrame.</p>
<p>This function aggregates the data based on predefined start and stop windows from the df_windows DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Input DataFrame containing the data to be aggregated.</p></li>
<li><p><strong>time_header</strong> (<em>str</em>) – Name of the column containing the time values.</p></li>
<li><p><strong>df_windows</strong> (<em>pandas.DataFrame</em>) – DataFrame containing the predefined windows with start and stop times for aggregation.</p></li>
<li><p><strong>window_start_header</strong> (<em>str</em>) – Name of the column containing the start time of the window.</p></li>
<li><p><strong>window_stop_header</strong> (<em>str</em>) – Name of the column containing the stop time of the window.</p></li>
<li><p><strong>categorical_columns</strong> (<em>list</em><em> of </em><em>str</em>) – List of categorical columns for which statistical functions are applied.</p></li>
<li><p><strong>continuous_columns</strong> (<em>list</em><em> of </em><em>str</em>) – List of continuous columns for which statistical functions are applied.</p></li>
<li><p><strong>freq</strong> (<em>float</em><em>, </em><em>optional</em>) – Frequency of data, used to filter out groups that don’t meet the coverage threshold.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Proportion of non-missing values required for aggregation to occur in each group. Default is 0.75.</p></li>
<li><p><strong>by</strong> (<em>str</em><em> or </em><em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Columns by which to group the data (e.g., “subject_id”).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of statistical functions to apply (e.g., “mean”, “std”).</p></li>
<li><p><strong>additional_functions</strong> (<em>dict</em><em>, </em><em>optional</em>) – Dictionary of additional custom aggregation functions to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated DataFrame with statistical summaries for each window.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.calculate_start_end">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">calculate_start_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_windows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#calculate_start_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.calculate_start_end" title="Link to this definition"></a></dt>
<dd><p>Compute start and end times based on window length and setting (‘before’, ‘after’, ‘around’).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_windows</strong> (<em>pandas.DataFrame</em>) – DataFrame containing the windows with times.</p></li>
<li><p><strong>window_length</strong> (<em>int</em>) – Length of the window in hours.</p></li>
<li><p><strong>setting</strong> (<em>str</em>) – Setting for how the window is defined: ‘before’, ‘after’, or ‘around’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Start and end times for the windows as Pandas Series.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple of pandas.Series</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the setting is not one of “before”, “around”, “after”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.check_period">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">check_period</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#check_period"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.check_period" title="Link to this definition"></a></dt>
<dd><p>Validate the given period string.</p>
<p>This function checks if the provided period is a valid period specification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>period</strong> (<em>str</em>) – The period string to validate (e.g., ‘2D’, ‘1W’, ‘5h’).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The validated period string, potentially with a prepended ‘1’ if only an alias is provided.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the period is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.get_aggregation_windows">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">get_aggregation_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_times</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_header</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">by</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#get_aggregation_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.get_aggregation_windows" title="Link to this definition"></a></dt>
<dd><p>Map dataset times to start and stop times defined in df_times.</p>
<p>This function assigns each row in the data to a specific window defined by the start and stop times from the df_times DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – Input DataFrame to be aggregated.</p></li>
<li><p><strong>time_header</strong> (<em>str</em>) – Name of the column containing the time values in the data.</p></li>
<li><p><strong>df_times</strong> (<em>pandas.DataFrame</em>) – DataFrame containing the windows with start and stop times.</p></li>
<li><p><strong>start_header</strong> (<em>str</em>) – Name of the column containing the start time of the window.</p></li>
<li><p><strong>stop_header</strong> (<em>str</em>) – Name of the column containing the stop time of the window.</p></li>
<li><p><strong>by</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Columns by which to group the data (e.g., “subject_id”).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame where each row is assigned to a window based on the time it falls into.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If the input DataFrames don’t contain the required columns, or if the datetime columns don’t share the same timezones.</p></li>
<li><p><strong>RuntimeError</strong> – If get_aggregation_windows is not properly executed.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.get_stats_functions">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">get_stats_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#get_stats_functions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.get_stats_functions" title="Link to this definition"></a></dt>
<dd><p>Map statistical function names to the corresponding function implementations.</p>
<p>This function returns a list of tuples where each tuple contains a statistical function name
and the corresponding function to apply to the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<em>list</em><em> of </em><em>str</em>) – List of statistical functions to map (e.g., “mean”, “std”).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of tuples, each containing a function name and the corresponding function.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.aggregation_utils.is_daily_period">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.aggregation_utils.</span></span><span class="sig-name descname"><span class="pre">is_daily_period</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/aggregation_utils.html#is_daily_period"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.aggregation_utils.is_daily_period" title="Link to this definition"></a></dt>
<dd><p>Check if the given period represents a daily frequency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>period</strong> (<em>str</em>) – The period string (e.g., ‘2D’, ‘1W’).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the period represents a daily frequency, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.dataset_builder">
<span id="dataset-builder"></span><h2>dataset_builder<a class="headerlink" href="#module-cosanalysis.dataset_builder" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_builder.add_covariates">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">add_covariates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">analysis_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#add_covariates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_builder.add_covariates" title="Link to this definition"></a></dt>
<dd><p>Add covariates to the analysis dataset by merging relevant demographic and clinical data,
longitudinal covariates, and baseline PROs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>analysis_dataset</strong> (<em>pandas.DataFrame</em>) – The dataset to which covariates will be added.
It should contain at least the ‘subject_id’, ‘tup’ and ‘start_window’ columns.</p></li>
<li><p><strong>version</strong> (<em>str</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – “ias” or “eas”. Default is “ias”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modified dataset with added covariates, including demographics,
longitudinal covariates, baseline PROs, and disease scores (if applicable).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Demographics, longitudinal covariates, and baseline PROs are merged using the ‘subject_id’
and ‘Date’ columns.</p></li>
<li><p>Disease scores are merged based on ‘subject_id’ and ‘tup’ if a single cohort is provided.
If multiple cohorts are considered, the disease score and TIMESINCEDIAG information is excluded.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_builder.add_start_stop_window">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">add_start_stop_window</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#add_start_stop_window"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_builder.add_start_stop_window" title="Link to this definition"></a></dt>
<dd><p>Add the proper start and stop windows corresponding to the timings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timings</strong> (<em>pandas.DataFrame</em>) – A DataFrame that must contain at least the following columns: [“subject_id”, “Time”, “tup”, “tup_day”, “TIMING”].</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – Specifies the timing of the questions we want to load.
Must be one of ‘intra_daily’ or ‘daily’.</p></li>
<li><p><strong>window_length</strong> (<em>int</em>) – Length of the aggregation window in hours. Only useful if window_size is ‘intra_day’. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em>) – Must be one of ‘before’, ‘around’, ‘after’. Default is ‘around’ (window_length/2 hours before, window_length/2 hours after).
Only useful if window_size is ‘intra_day’.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_builder.build_analysis_dataset">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_analysis_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concept</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">change_from_baseline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'around'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_analysis_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_builder.build_analysis_dataset" title="Link to this definition"></a></dt>
<dd><p>Build the analysis dataset by combining and aggregating device and diary datasets,
incorporating the covariates specified in the SAP (demographics, longitudinal covariates,
baselines of the PROs, and disease score if considering a single cohort),
with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze.
Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’,
‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>concept</strong> (<em>str</em>) – Must be one of ‘F’ (fatigue), ‘SQ’ (sleep quality), ‘DS’ (daytime sleepiness),
or ‘all’ (to load all concepts).</p></li>
<li><p><strong>window_size</strong> (<em>str</em>) – Specifies the timing of the questions we want to load.
Must be one of ‘intra_daily’ or ‘daily’.</p></li>
<li><p><strong>change_from_baseline</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, computes changes from baselines. Default is False.</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – Statistics for aggregation. Default is None, which uses [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of the aggregation window in hours. Only useful if window_size is ‘intra_day’. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em><em>, </em><em>optional</em>) – Must be one of ‘before’, ‘around’, ‘after’. Default is ‘around’ (window_length/2 hours before, window_length/2 hours after).
Only useful if window_size is ‘intra_day’.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum proportion of non-missing values required in a group for aggregation. Default is 0.75 (in range [0, 1]).</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies whether the dataset to read should be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, specifies the dataset to load (‘Train’, ‘Test’, or ‘all’). Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – List of cohorts to consider. Default is None, meaning all cohorts are included.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset. Default is None, in which case the dataset is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The constructed analysis dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>Combines device data and diary data based on timings and performs aggregation as specified by the parameters.</p></li>
<li><p>Covariates such as demographics, PROs, and disease scores are incorporated as specified in the SAP.</p></li>
<li><p>The function supports intra-day and daily window sizes and allows for the calculation of changes from baseline if requested.</p></li>
<li><p>The dataset is merged with diaries and saved (if specified) before being returned.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the cohorts or device_type are invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_builder.build_dataset_on_frequency">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_dataset_on_frequency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'D'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cohorts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ias_dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_dataset_on_frequency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_builder.build_dataset_on_frequency" title="Link to this definition"></a></dt>
<dd><p>Build the unsupervised dataset by aggregating device data based on frequency, incorporating specified covariates (e.g., demographics, longitudinal covariates, baseline PROs, and disease score for a single cohort), with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze. Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>period</strong> (<em>str</em><em>, </em><em>optional</em>) – The frequency of aggregation. Default is “D” (daily).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The statistics to compute during aggregation. Default is None, in which case the aggregation is done with [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>cohorts</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The list of cohorts to consider. Default is None, which means all cohorts are considered.</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – The minimum proportion of non-missing values required for aggregation. Value between 0 and 1. Default is 0.75.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset to read must be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>participants</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.</p></li>
<li><p><strong>ias_dataset</strong> (<em>str</em><em>, </em><em>optional</em>) – If participants is None, specifies the dataset to load (‘Train’, ‘Test’, or ‘all’). Only useful if analysis_set=”ias”. Default is ‘Train’.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset to. If None, the dataset is not saved. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analysis dataset with device data aggregated on frequency, including covariates.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>The function handles different periods (e.g., daily or other frequencies) and adjusts the aggregation accordingly.</p></li>
<li><p>If a device type requires daily aggregation or other specific adjustments, those are handled within the function.</p></li>
<li><p>Covariates (e.g., demographics, baseline PROs) are added to the final dataset by the <cite>add_covariates</cite> function.</p></li>
<li><p>The final dataset can be saved to a local path if specified in the <cite>savepath</cite> argument.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If invalid device types, cohorts or periods are provided.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.dataset_builder.build_dataset_on_timings">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.dataset_builder.</span></span><span class="sig-name descname"><span class="pre">build_dataset_on_timings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">setting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'around'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statistics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresh</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.75</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ias'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">covariates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/dataset_builder.html#build_dataset_on_timings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.dataset_builder.build_dataset_on_timings" title="Link to this definition"></a></dt>
<dd><p>Build the analysis dataset by aggregating device data based on timings, with the option to filter by cohort.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device_types</strong> (<em>list</em><em> of </em><em>str</em>) – A list of device types to analyze. Each must be one of ‘SLP_night’, ‘STS’, ‘HRV’, ‘VIT’, ‘GVA’, ‘MCR_MCR’, ‘MCR_MCL’, ‘COG_dst’, ‘COG_pvt’.</p></li>
<li><p><strong>timings</strong> (<em>pandas.DataFrame</em>) – A DataFrame that must contain at least the following columns: [“subject_id”, “Time”, “tup”, “tup_day”, “TIMING”].</p></li>
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of the aggregation window in hours. Only useful if <cite>setting</cite> is ‘intra_day’. Default is 2.</p></li>
<li><p><strong>setting</strong> (<em>str</em><em>, </em><em>optional</em>) – Defines the timing window for intra-day aggregation. Must be one of ‘before’, ‘around’, or ‘after’. Default is ‘around’ (window_length/2 hours before, window_length/2 hours after).</p></li>
<li><p><strong>statistics</strong> (<em>list</em><em> of </em><em>str</em><em>, </em><em>optional</em>) – The statistics to compute during aggregation. Default is None, in which case the aggregation is done with [“mean”, “std”, “var”, “max”, “min”, “25p”, “50p”, “75p”, “mode”].</p></li>
<li><p><strong>thresh</strong> (<em>float</em><em>, </em><em>optional</em>) – Minimum proportion of non-missing values required for aggregation. Value between 0 and 1. Default is 0.75.</p></li>
<li><p><strong>version</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies the version of the data to use.</p></li>
<li><p><strong>imputation</strong> (<em>bool</em><em>, </em><em>optional</em>) – Specifies if the dataset to read must be imputed. Default is False.</p></li>
<li><p><strong>analysis_set</strong> (<em>str</em><em>, </em><em>optional</em>) – Specifies whether to use ‘ias’ or ‘eas’. Default is ‘ias’.</p></li>
<li><p><strong>covariates</strong> (<em>bool</em><em>, </em><em>optional</em>) – Add covariates to the dataframe. Default is True.</p></li>
<li><p><strong>savepath</strong> (<em>str</em><em>, </em><em>optional</em>) – Local path to save the analysis dataset. Default is None, in which case the dataset is not saved.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The analysis dataset with device data aggregated based on the specified timings.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Note<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>The function handles different window settings (‘before’, ‘around’, ‘after’) for intra-day aggregation.</p></li>
<li><p>Device data is aggregated based on timings and merged with the <cite>timings</cite> DataFrame.</p></li>
<li><p>Covariates (e.g., demographics, baseline PROs) are added to the final dataset by the <cite>add_covariates</cite> function.</p></li>
<li><p>The <cite>window_length</cite> parameter controls the length of the aggregation window for intra-day data.</p></li>
</ul>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the <cite>timings</cite> DataFrame is missing required columns, or if an invalid <cite>setting</cite> is provided.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-cosanalysis.preprocessing">
<span id="preprocessing"></span><h2>preprocessing<a class="headerlink" href="#module-cosanalysis.preprocessing" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.preprocessing.label_mappings">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.preprocessing.</span></span><span class="sig-name descname"><span class="pre">label_mappings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/preprocessing.html#label_mappings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.preprocessing.label_mappings" title="Link to this definition"></a></dt>
<dd><p>Returns a dictionary of label mappings for various columns, such as <cite>TIMING</cite>, <cite>GENDER</cite>, <cite>COHORT</cite>,
<cite>Season</cite>, and <cite>Day_Type</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary containing the mappings for each column.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cosanalysis.preprocessing.processing">
<span class="sig-prename descclassname"><span class="pre">cosanalysis.preprocessing.</span></span><span class="sig-name descname"><span class="pre">processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'z_score'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/cosanalysis/preprocessing.html#processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cosanalysis.preprocessing.processing" title="Link to this definition"></a></dt>
<dd><p>Preprocess the given dataset by normalizing the data, encoding categorical variables,
and removing columns with no variability.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – The input dataframe to be processed. It should contain the device data,
diary data, and possibly other columns for analysis.</p></li>
<li><p><strong>normalize</strong> (<em>{'z_score'</em><em>, </em><em>'min_max'</em><em>, </em><em>None}</em><em>, </em><em>optional</em>) – Specifies the normalization method to apply to the numerical columns:
- ‘z_score’: Normalize using z-score (standardization).
- ‘min_max’: Normalize using Min-Max scaling.
- None: No normalization applied.
Default is ‘z_score’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A processed dataframe with the specified normalization applied, categorical variables
encoded, and columns with no variability removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the <cite>normalize</cite> parameter is not one of [‘z_score’, ‘min_max’, None].</p>
</dd>
<dt class="field-odd">Note<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>Non-numeric columns such as <cite>subject_id</cite>, <cite>tup</cite>, <cite>tup_day</cite>, <cite>start_window</cite> and <cite>stop_window</cite> are excluded from normalization.</p></li>
<li><p>Categorical columns are mapped to numeric values (e.g., ‘GENDER’, ‘COHORT’) using a predefined
mapping in the <cite>label_mappings</cite> function.</p></li>
<li><p>One-hot encoding is performed on columns starting with certain prefixes, such as
<cite>VIT_PostureCategory_1min</cite>, <cite>mcr_class</cite>, and <cite>mcl_class</cite>.</p></li>
<li><p>Any columns with constant values (no variability) are dropped before returning the result.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DEMO.html" class="btn btn-neutral float-left" title="Demonstration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="model.html" class="btn btn-neutral float-right" title="Model upload requirements" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Let it Care.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>