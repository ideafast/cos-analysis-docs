

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Demonstration &mdash; COS-analysis  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css?v=2aa19091" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Useful functions" href="cosanalysis.html" />
    <link rel="prev" title="Introduction to COS-analysis package" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            COS-analysis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction to COS-analysis package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Demonstration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Read-a-device-dataset">Read a device dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Load-diaries">Load diaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Read-Patient-Global-Impression-(PGI)">Read Patient Global Impression (PGI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Build-the-analysis-dataset---device-data-aggregated-with-diaries">Build the analysis dataset - device data aggregated with diaries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#VIT">VIT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Sleep">Sleep</a></li>
<li class="toctree-l3"><a class="reference internal" href="#VIT-&amp;-sleep-combined">VIT &amp; sleep combined</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Build-the-analysis-dataset---unsupervised-case,-device-aggregated-on-frequency">Build the analysis dataset - unsupervised case, device aggregated on frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Preprocess-the-dataframe">Preprocess the dataframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Other-useful-functions">Other useful functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Get-demographics">Get demographics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Get-PROs">Get PROs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Get-PROs-baselines">Get PROs baselines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Get-disease-scores">Get disease scores</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Get-diary-timings">Get diary timings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cosanalysis.html">Useful functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="cosanalysis.html#cosanalysis-package-all-functions">cosanalysis package - all functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model upload requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html#model-folder-example">Model folder example</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">COS-analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Demonstration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/DEMO.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Demonstration">
<h1>Demonstration<a class="headerlink" href="#Demonstration" title="Link to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_colwidth&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Read-a-device-dataset">
<h2>Read a device dataset<a class="headerlink" href="#Read-a-device-dataset" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">read_device_dataset</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> read_device_dataset
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 read_device_dataset<span class="ansi-blue-fg">(</span>
    device_type<span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Reads a pre-saved dataset, filtering by cohorts, participants and analysis set. The data of each participant is cleaned and concatenated.

:param device_type: The type of device. Must be one of &#39;SLP_night&#39;, &#39;STS&#39;, &#39;HRV&#39;, &#39;VIT&#39;, &#39;GVA&#39;, &#39;MCR_MCR&#39;, &#39;MCR_MCL&#39;, &#39;COG_dst&#39;, &#39;COG_pvt&#39;.
:type device_type: str

:param version: Specifies the version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: The analysis set to use (&#39;ias&#39; or &#39;eas&#39;). Default is &#39;ias&#39;.
:type analysis_set: str, optional

:param participants: A list of participant IDs to include in the dataset. Default is None, all participants for the dataset (ias or eas) are loaded.
:type participants: list of str, optional

:param ias_dataset: Specifies the dataset of the identification set to load. Must be one of &#39;Train&#39;, &#39;Test&#39;, or &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: A list of cohorts to load. Default is None, all cohorts are loaded.
:type cohorts: list of str, optional

:return: A DataFrame containing the filtered dataset.
:rtype: pandas.DataFrame

:raises ValueError: If no file corresponding to the given parameters is found.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/device_data_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slp_dataset</span> <span class="o">=</span> <span class="n">read_device_dataset</span><span class="p">(</span><span class="n">device_type</span><span class="o">=</span><span class="s1">&#39;SLP_night&#39;</span><span class="p">,</span>
                                  <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span><span class="p">,</span>
                                  <span class="n">imputation</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                  <span class="n">cohorts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;IBD&#39;</span><span class="p">])</span>
<span class="n">slp_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>device_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>start_timestamp</th>
      <th>end_timestamp</th>
      <th>slp_TotalSleepTime_night</th>
      <th>slp_HeartrateMean95_night</th>
      <th>slp_HeartrateMean90_night</th>
      <th>slp_HeartrateMean80_night</th>
      <th>slp_HeartrateQ05_night</th>
      <th>slp_HeartrateQ50_night</th>
      <th>slp_HeartrateQ95_night</th>
      <th>slp_HeartrateStd_night</th>
      <th>slp_ResprateMean95_night</th>
      <th>slp_ResprateMean90_night</th>
      <th>slp_ResprateMean80_night</th>
      <th>slp_ResprateQ05_night</th>
      <th>slp_ResprateQ50_night</th>
      <th>slp_ResprateQ95_night</th>
      <th>slp_ResprateStd_night</th>
      <th>slp_SleepEfficiencyOrigin_night</th>
      <th>slp_SleepEficiencyNew_night</th>
      <th>slp_WakeBefore_night</th>
      <th>slp_WASO_night</th>
      <th>slp_SleepQuality_night</th>
      <th>slp_WakeRatio_night</th>
      <th>slp_WakeEvents_night</th>
      <th>slp_WakeLongest_night</th>
      <th>slp_SleepQuietRatio_night</th>
      <th>slp_SleepActiveRatio_night</th>
      <th>slp_SleepLightRatio_night</th>
      <th>slp_SleepDeepRatio_night</th>
      <th>slp_WakePerTst_night</th>
      <th>slp_RemPerTst_night</th>
      <th>slp_LightPerTst_night</th>
      <th>slp_DeepPerTst_night</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>568</th>
      <td>BAGDKXD</td>
      <td>BEDVKVQPE</td>
      <td>1.0</td>
      <td>0</td>
      <td>2024-03-21 22:07:35</td>
      <td>2024-03-22 06:06:35</td>
      <td>22400</td>
      <td>60.4</td>
      <td>60.0</td>
      <td>59.5</td>
      <td>53.3</td>
      <td>58.1</td>
      <td>68.3</td>
      <td>4.22</td>
      <td>15.5</td>
      <td>15.5</td>
      <td>15.4</td>
      <td>13.9</td>
      <td>15.1</td>
      <td>17.5</td>
      <td>0.994</td>
      <td>0.774</td>
      <td>0.777</td>
      <td>NaN</td>
      <td>6420</td>
      <td>0.701</td>
      <td>0.135</td>
      <td>16</td>
      <td>870</td>
      <td>0.665</td>
      <td>0.335</td>
      <td>0.537</td>
      <td>0.128</td>
      <td>0.223</td>
      <td>0.244</td>
      <td>0.277</td>
      <td>0.256</td>
    </tr>
    <tr>
      <th>569</th>
      <td>BAGDKXD</td>
      <td>BEDVKVQPE</td>
      <td>1.0</td>
      <td>1</td>
      <td>2024-03-22 21:28:42</td>
      <td>2024-03-23 07:41:42</td>
      <td>27800</td>
      <td>62.9</td>
      <td>62.8</td>
      <td>62.7</td>
      <td>57.7</td>
      <td>61.1</td>
      <td>69.5</td>
      <td>3.43</td>
      <td>17.1</td>
      <td>17.0</td>
      <td>17.0</td>
      <td>15.0</td>
      <td>16.6</td>
      <td>20.2</td>
      <td>1.440</td>
      <td>0.738</td>
      <td>0.754</td>
      <td>NaN</td>
      <td>9060</td>
      <td>0.667</td>
      <td>0.138</td>
      <td>30</td>
      <td>990</td>
      <td>0.713</td>
      <td>0.287</td>
      <td>0.597</td>
      <td>0.115</td>
      <td>0.246</td>
      <td>0.166</td>
      <td>0.396</td>
      <td>0.192</td>
    </tr>
    <tr>
      <th>570</th>
      <td>BAGDKXD</td>
      <td>BEDVKVQPE</td>
      <td>1.0</td>
      <td>2</td>
      <td>2024-03-23 22:28:50</td>
      <td>2024-03-24 09:28:50</td>
      <td>30200</td>
      <td>53.3</td>
      <td>52.8</td>
      <td>52.0</td>
      <td>46.6</td>
      <td>49.9</td>
      <td>57.7</td>
      <td>3.16</td>
      <td>14.7</td>
      <td>14.7</td>
      <td>14.6</td>
      <td>12.8</td>
      <td>14.0</td>
      <td>17.7</td>
      <td>1.250</td>
      <td>0.762</td>
      <td>0.762</td>
      <td>1380.0</td>
      <td>9420</td>
      <td>0.741</td>
      <td>0.098</td>
      <td>24</td>
      <td>630</td>
      <td>0.669</td>
      <td>0.331</td>
      <td>0.468</td>
      <td>0.201</td>
      <td>0.238</td>
      <td>0.250</td>
      <td>0.333</td>
      <td>0.180</td>
    </tr>
    <tr>
      <th>571</th>
      <td>BAGDKXD</td>
      <td>BEDVKVQPE</td>
      <td>1.0</td>
      <td>3</td>
      <td>2024-03-24 21:36:26</td>
      <td>2024-03-25 06:23:26</td>
      <td>24700</td>
      <td>56.7</td>
      <td>56.6</td>
      <td>56.5</td>
      <td>51.8</td>
      <td>55.8</td>
      <td>60.5</td>
      <td>2.33</td>
      <td>15.2</td>
      <td>15.2</td>
      <td>15.1</td>
      <td>13.3</td>
      <td>15.1</td>
      <td>18.6</td>
      <td>1.370</td>
      <td>0.780</td>
      <td>0.780</td>
      <td>420.0</td>
      <td>6960</td>
      <td>0.638</td>
      <td>0.133</td>
      <td>30</td>
      <td>510</td>
      <td>0.762</td>
      <td>0.238</td>
      <td>0.672</td>
      <td>0.090</td>
      <td>0.220</td>
      <td>0.214</td>
      <td>0.324</td>
      <td>0.242</td>
    </tr>
    <tr>
      <th>572</th>
      <td>BAGDKXD</td>
      <td>BEDVKVQPE</td>
      <td>1.0</td>
      <td>4</td>
      <td>2024-03-25 23:09:34</td>
      <td>2024-03-26 06:57:34</td>
      <td>22500</td>
      <td>58.6</td>
      <td>58.6</td>
      <td>58.6</td>
      <td>54.1</td>
      <td>58.1</td>
      <td>62.1</td>
      <td>2.23</td>
      <td>15.3</td>
      <td>15.3</td>
      <td>15.2</td>
      <td>14.2</td>
      <td>15.4</td>
      <td>17.9</td>
      <td>0.856</td>
      <td>0.798</td>
      <td>0.800</td>
      <td>NaN</td>
      <td>5640</td>
      <td>0.658</td>
      <td>0.102</td>
      <td>26</td>
      <td>270</td>
      <td>0.665</td>
      <td>0.335</td>
      <td>0.577</td>
      <td>0.088</td>
      <td>0.200</td>
      <td>0.256</td>
      <td>0.324</td>
      <td>0.220</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Load-diaries">
<h2>Load diaries<a class="headerlink" href="#Load-diaries" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">load_diaries</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> load_diaries
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 load_diaries<span class="ansi-blue-fg">(</span>
    concept<span class="ansi-blue-fg">,</span>
    window_size<span class="ansi-blue-fg">,</span>
    change_from_baseline<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    agg_daily<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;mean&#39;</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Load diaries related to a specific study concept and a defined window size, with the option to account for changes from baselines, and select the participants or cohorts to include.

:param concept: Concept to load. Must be one of &#39;F&#39; (fatigue), &#39;SQ&#39; (sleep quality), &#39;DS&#39; (daytime sleepiness), &#39;all&#39; (to load all three concepts), &#39;confounders&#39; to load confounders (Anxiousness, Mood, Pain).
:type concept: str

:param window_size: The timing of the questions that we want to load. Must be one of &#39;intra_daily&#39;, &#39;daily&#39;.
:type window_size: str

:param change_from_baseline: If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.
:type change_from_baseline: bool, optional

:param version: Specifies the version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:param agg_daily: function to aggregate diaries daily with. Default is &#34;mean&#34;.
:type agg_daily: str, optional

:return: A DataFrame with diaries corresponding to the chosen parameters.
:rtype: pandas.DataFrame

:raises ValueError: If the parameters are not correct.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">diaries_fatigue_intra_day_ibd</span> <span class="o">=</span> <span class="n">load_diaries</span><span class="p">(</span><span class="n">concept</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="p">,</span>
                                             <span class="n">window_size</span><span class="o">=</span><span class="s2">&quot;intra_daily&quot;</span><span class="p">,</span>
                                             <span class="n">change_from_baseline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                             <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span><span class="p">,</span>
                                             <span class="n">cohorts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;IBD&#39;</span><span class="p">]</span>
                                             <span class="p">)</span>
<span class="n">diaries_fatigue_intra_day_ibd</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>Time</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>overall_fatigue_vas_baseline</th>
      <th>physical_fatigue_vas_baseline</th>
      <th>mental_fatigue_vas_baseline</th>
      <th>overall_fatigue_vas_change</th>
      <th>physical_fatigue_vas_change</th>
      <th>mental_fatigue_vas_change</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>BAGDKXD</td>
      <td>2024-05-19 07:52:19.201</td>
      <td>2.0</td>
      <td>1</td>
      <td>M</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>12.0</td>
      <td>12.0</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>BAGDKXD</td>
      <td>2024-05-19 18:43:13.784</td>
      <td>2.0</td>
      <td>1</td>
      <td>E</td>
      <td>16.0</td>
      <td>15.0</td>
      <td>20.0</td>
      <td>-6.0</td>
      <td>-5.0</td>
      <td>-10.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>BAGDKXD</td>
      <td>2024-05-24 15:53:24.103</td>
      <td>2.0</td>
      <td>6</td>
      <td>A</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>-12.0</td>
      <td>-12.0</td>
      <td>-12.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>BAGDKXD</td>
      <td>2024-07-05 08:15:23.660</td>
      <td>3.0</td>
      <td>3</td>
      <td>M</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>11.0</td>
      <td>5.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>BAGDKXD</td>
      <td>2024-07-06 17:45:21.051</td>
      <td>3.0</td>
      <td>4</td>
      <td>E</td>
      <td>16.0</td>
      <td>15.0</td>
      <td>20.0</td>
      <td>-1.0</td>
      <td>0.0</td>
      <td>-2.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Read-Patient-Global-Impression-(PGI)">
<h2>Read Patient Global Impression (PGI)<a class="headerlink" href="#Read-Patient-Global-Impression-(PGI)" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">format_diaries</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> format_diaries
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 format_diaries<span class="ansi-blue-fg">(</span>
    questions<span class="ansi-blue-fg">,</span>
    window_size<span class="ansi-blue-fg">,</span>
    change_from_baseline<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    agg_daily<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;mean&#39;</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Load diaries choosing specific questions and with a defined window size, and the option to account for changes from baselines, and select the participants or cohorts to include.

:param questions: List of questions to load. Each must be one of &#34;overall_fatigue_vas&#34;, &#34;physical_fatigue_vas&#34;, &#34;mental_fatigue_vas&#34;, &#34;sleep_quality_vas&#34;, &#34;KSS&#34;, &#34;PGIS-F&#34;, &#34;PGIC-F&#34;, &#34;PGIS-SQ&#34;, &#34;PGIC-SQ&#34;, &#34;PGIS-DS&#34;, &#34;PGIC-DS&#34;, &#34;anxiousness_vas&#34;, &#34;mood_vas&#34;, &#34;pain_vas&#34;.
:type questions: list of str

:param window_size: The timing of the questions that we want to load. Must be one of &#39;intra_daily&#39;, &#39;daily&#39;.
:type window_size: str

:param change_from_baseline: If True, we compute the changes from baselines, otherwise we load the answers of the patients. Default is False.
:type change_from_baseline: bool, optional

:param version: Specifies the version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:param agg_daily: function to aggregate diaries daily with. Default is &#34;mean&#34;.
:type agg_daily: str, optional

:return: A DataFrame with diaries corresponding to the chosen parameters.
:rtype: pandas.DataFrame

:raises ValueError: If the parameters are not correct.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pgi_questions</span> <span class="o">=</span> <span class="n">format_diaries</span><span class="p">(</span>
    <span class="n">questions</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;PGIS-F&quot;</span><span class="p">,</span> <span class="s2">&quot;PGIC-F&quot;</span><span class="p">,</span> <span class="s2">&quot;PGIS-SQ&quot;</span><span class="p">,</span> <span class="s2">&quot;PGIC-SQ&quot;</span><span class="p">,</span> <span class="s2">&quot;PGIS-DS&quot;</span><span class="p">,</span> <span class="s2">&quot;PGIC-DS&quot;</span><span class="p">],</span>
    <span class="n">window_size</span><span class="o">=</span><span class="s2">&quot;daily&quot;</span><span class="p">,</span>
    <span class="n">change_from_baseline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s2">&quot;v2_analysis&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">pgi_questions</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>Time</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>PGIS-F</th>
      <th>PGIC-F</th>
      <th>PGIS-SQ</th>
      <th>PGIC-SQ</th>
      <th>PGIS-DS</th>
      <th>PGIC-DS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACFHJAC</td>
      <td>2024-09-03</td>
      <td>1.0</td>
      <td>1</td>
      <td>daily</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ACFHJAC</td>
      <td>2024-09-04</td>
      <td>1.0</td>
      <td>2</td>
      <td>daily</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>1.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ACFHJAC</td>
      <td>2024-09-05</td>
      <td>1.0</td>
      <td>3</td>
      <td>daily</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ACFHJAC</td>
      <td>2024-09-06</td>
      <td>1.0</td>
      <td>4</td>
      <td>daily</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ACFHJAC</td>
      <td>2024-09-07</td>
      <td>1.0</td>
      <td>5</td>
      <td>daily</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>4.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Build-the-analysis-dataset---device-data-aggregated-with-diaries">
<h2>Build the analysis dataset - device data aggregated with diaries<a class="headerlink" href="#Build-the-analysis-dataset---device-data-aggregated-with-diaries" title="Link to this heading"></a></h2>
<section id="VIT">
<h3>VIT<a class="headerlink" href="#VIT" title="Link to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">build_analysis_dataset</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> build_analysis_dataset
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 build_analysis_dataset<span class="ansi-blue-fg">(</span>
    device_types<span class="ansi-blue-fg">,</span>
    concept<span class="ansi-blue-fg">,</span>
    window_size<span class="ansi-blue-fg">,</span>
    change_from_baseline<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    statistics<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    window_length<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">2</span><span class="ansi-blue-fg">,</span>
    setting<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;around&#39;</span><span class="ansi-blue-fg">,</span>
    thresh<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0.75</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    covariates<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span>
    savepath<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Build the analysis dataset by combining and aggregating device and diary datasets,
incorporating the covariates specified in the SAP (demographics, longitudinal covariates,
baselines of the PROs, and disease score if considering a single cohort),
with the option to filter by cohort.

:param device_types: A list of device types to analyze.
    Each must be one of &#39;SLP_night&#39;, &#39;STS&#39;, &#39;HRV&#39;, &#39;VIT&#39;, &#39;GVA&#39;, &#39;MCR_MCR&#39;,
    &#39;MCR_MCL&#39;, &#39;COG_dst&#39;, &#39;COG_pvt&#39;.
:type device_types: list of str

:param concept: Must be one of &#39;F&#39; (fatigue), &#39;SQ&#39; (sleep quality), &#39;DS&#39; (daytime sleepiness),
    or &#39;all&#39; (to load all concepts).
:type concept: str

:param window_size: Specifies the timing of the questions we want to load.
    Must be one of &#39;intra_daily&#39; or &#39;daily&#39;.
:type window_size: str

:param change_from_baseline: If True, computes changes from baselines. Default is False.
:type change_from_baseline: bool, optional

:param statistics: Statistics for aggregation. Default is None, which uses [&#34;mean&#34;, &#34;std&#34;, &#34;var&#34;, &#34;max&#34;, &#34;min&#34;, &#34;25p&#34;, &#34;50p&#34;, &#34;75p&#34;, &#34;mode&#34;].
:type statistics: list of str, optional

:param window_length: Length of the aggregation window in hours. Only useful if window_size is &#39;intra_day&#39;. Default is 2.
:type window_length: int, optional

:param setting: Must be one of &#39;before&#39;, &#39;around&#39;, &#39;after&#39;. Default is &#39;around&#39; (window_length/2 hours before, window_length/2 hours after).
    Only useful if window_size is &#39;intra_day&#39;.
:type setting: str, optional

:param thresh: Minimum proportion of non-missing values required in a group for aggregation. Default is 0.75 (in range [0, 1]).
:type thresh: float, optional

:param version: Specifies the version of the data to use.
:type version: str, optional

:param imputation: Specifies whether the dataset to read should be imputed. Default is False.
:type imputation: bool, optional

:param analysis_set: Specifies whether to use &#39;ias&#39; or &#39;eas&#39;. Default is &#39;ias&#39;.
:type analysis_set: str, optional

:param participants: List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.
:type participants: str or list, optional

:param ias_dataset: If participants is None, specifies the dataset to load (&#39;Train&#39;, &#39;Test&#39;, or &#39;all&#39;). Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: List of cohorts to consider. Default is None, meaning all cohorts are included.
:type cohorts: list of str, optional

:param covariates: Add covariates to the dataframe. Default is True.
:type covariates: bool, optional

:param savepath: Local path to save the analysis dataset. Default is None, in which case the dataset is not saved.
:type savepath: str, optional

:return: The constructed analysis dataset.
:rtype: pandas.DataFrame

:note:
    - Combines device data and diary data based on timings and performs aggregation as specified by the parameters.
    - Covariates such as demographics, PROs, and disease scores are incorporated as specified in the SAP.
    - The function supports intra-day and daily window sizes and allows for the calculation of changes from baseline if requested.
    - The dataset is merged with diaries and saved (if specified) before being returned.

:raises ValueError: If the cohorts or device_type are invalid.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_builder.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vit_analysis_dataset</span> <span class="o">=</span> <span class="n">build_analysis_dataset</span><span class="p">(</span><span class="n">device_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;VIT&#39;</span><span class="p">],</span>
                                              <span class="n">concept</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">,</span>
                                              <span class="n">window_size</span><span class="o">=</span><span class="s1">&#39;intra_daily&#39;</span><span class="p">,</span>
                                              <span class="n">change_from_baseline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                              <span class="n">statistics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">],</span>
                                              <span class="n">window_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                              <span class="n">setting</span><span class="o">=</span><span class="s2">&quot;around&quot;</span><span class="p">,</span>
                                              <span class="n">cohorts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span>
                                              <span class="p">)</span>
<span class="n">vit_analysis_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>overall_fatigue_vas</th>
      <th>physical_fatigue_vas</th>
      <th>mental_fatigue_vas</th>
      <th>start_window</th>
      <th>stop_window</th>
      <th>VIT_HearthRate_1min_mean</th>
      <th>VIT_HearthRate_1min_std</th>
      <th>VIT_RespirationRate_1min_mean</th>
      <th>VIT_RespirationRate_1min_std</th>
      <th>VIT_SkinTemperature_1min_mean</th>
      <th>VIT_SkinTemperature_1min_std</th>
      <th>VIT_NbSteps_1min_mean</th>
      <th>VIT_NbSteps_1min_std</th>
      <th>VIT_StepsCum_1min_mean</th>
      <th>VIT_StepsCum_1min_std</th>
      <th>VIT_RRIValue_1min_mean</th>
      <th>VIT_RRIValue_1min_std</th>
      <th>VIT_PostureCategory_1min_mode</th>
      <th>COHORT</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>Day_Type</th>
      <th>Season</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AFEFCAH</td>
      <td>1.0</td>
      <td>0</td>
      <td>E</td>
      <td>76.0</td>
      <td>50.0</td>
      <td>80.0</td>
      <td>2022-11-18 19:35:38.726</td>
      <td>2022-11-18 21:35:38.726</td>
      <td>79.441667</td>
      <td>7.073202</td>
      <td>18.850000</td>
      <td>2.839251</td>
      <td>37.074457</td>
      <td>0.351186</td>
      <td>1.766667</td>
      <td>5.199763</td>
      <td>1458.016667</td>
      <td>64.826333</td>
      <td>759.200000</td>
      <td>77.958144</td>
      <td>LeaningBack</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.83045</td>
      <td>Weekday</td>
      <td>Fall</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AFEFCAH</td>
      <td>1.0</td>
      <td>1</td>
      <td>M</td>
      <td>40.0</td>
      <td>50.0</td>
      <td>53.0</td>
      <td>2022-11-19 07:52:42.462</td>
      <td>2022-11-19 09:52:42.462</td>
      <td>87.558333</td>
      <td>9.435135</td>
      <td>18.216667</td>
      <td>3.998284</td>
      <td>37.491977</td>
      <td>0.121943</td>
      <td>1.391667</td>
      <td>3.726570</td>
      <td>85.400000</td>
      <td>41.160763</td>
      <td>692.566667</td>
      <td>75.905817</td>
      <td>Standing</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.83045</td>
      <td>Weekend</td>
      <td>Fall</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AFEFCAH</td>
      <td>3.0</td>
      <td>0</td>
      <td>A</td>
      <td>53.0</td>
      <td>30.0</td>
      <td>50.0</td>
      <td>2023-03-02 12:09:10.403</td>
      <td>2023-03-02 14:09:10.403</td>
      <td>62.150000</td>
      <td>8.530371</td>
      <td>21.241667</td>
      <td>3.625298</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.225000</td>
      <td>4.410573</td>
      <td>437.300000</td>
      <td>48.273312</td>
      <td>982.500000</td>
      <td>118.840406</td>
      <td>LeaningBack</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.83045</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AFEFCAH</td>
      <td>3.0</td>
      <td>0</td>
      <td>E</td>
      <td>31.0</td>
      <td>50.0</td>
      <td>51.0</td>
      <td>2023-03-02 18:11:32.523</td>
      <td>2023-03-02 20:11:32.523</td>
      <td>72.733333</td>
      <td>15.995132</td>
      <td>18.391667</td>
      <td>4.215410</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>10.700000</td>
      <td>25.884553</td>
      <td>2805.016667</td>
      <td>426.643495</td>
      <td>867.233333</td>
      <td>193.509678</td>
      <td>Standing</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.83045</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AFEFCAH</td>
      <td>3.0</td>
      <td>0</td>
      <td>M</td>
      <td>68.0</td>
      <td>50.0</td>
      <td>58.0</td>
      <td>2023-03-02 08:09:00.081</td>
      <td>2023-03-02 10:09:00.081</td>
      <td>78.208333</td>
      <td>20.339098</td>
      <td>19.741667</td>
      <td>1.817265</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.391667</td>
      <td>3.913553</td>
      <td>34.158333</td>
      <td>44.966093</td>
      <td>829.933333</td>
      <td>247.782492</td>
      <td>Standing</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.83045</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Sleep">
<h3>Sleep<a class="headerlink" href="#Sleep" title="Link to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">build_analysis_dataset</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">slp_night_analysis_dataset</span> <span class="o">=</span> <span class="n">build_analysis_dataset</span><span class="p">(</span><span class="n">device_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SLP_night&#39;</span><span class="p">],</span>
                                                    <span class="n">concept</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">,</span>
                                                    <span class="n">window_size</span><span class="o">=</span><span class="s1">&#39;daily&#39;</span><span class="p">,</span>
                                                    <span class="n">change_from_baseline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                    <span class="n">cohorts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PD&#39;</span><span class="p">],</span>
                                                    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span>
                                                    <span class="p">)</span>
<span class="n">slp_night_analysis_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>overall_fatigue_vas</th>
      <th>physical_fatigue_vas</th>
      <th>mental_fatigue_vas</th>
      <th>start_window</th>
      <th>stop_window</th>
      <th>slp_TotalSleepTime_night</th>
      <th>slp_HeartrateMean95_night</th>
      <th>slp_HeartrateMean90_night</th>
      <th>slp_HeartrateMean80_night</th>
      <th>slp_HeartrateQ05_night</th>
      <th>slp_HeartrateQ50_night</th>
      <th>slp_HeartrateQ95_night</th>
      <th>slp_HeartrateStd_night</th>
      <th>slp_ResprateMean95_night</th>
      <th>slp_ResprateMean90_night</th>
      <th>slp_ResprateMean80_night</th>
      <th>slp_ResprateQ05_night</th>
      <th>slp_ResprateQ50_night</th>
      <th>slp_ResprateQ95_night</th>
      <th>slp_ResprateStd_night</th>
      <th>slp_SleepEfficiencyOrigin_night</th>
      <th>slp_SleepEficiencyNew_night</th>
      <th>slp_WakeBefore_night</th>
      <th>slp_WASO_night</th>
      <th>slp_SleepQuality_night</th>
      <th>slp_WakeRatio_night</th>
      <th>slp_WakeEvents_night</th>
      <th>slp_WakeLongest_night</th>
      <th>slp_SleepQuietRatio_night</th>
      <th>slp_SleepActiveRatio_night</th>
      <th>slp_SleepLightRatio_night</th>
      <th>slp_SleepDeepRatio_night</th>
      <th>slp_WakePerTst_night</th>
      <th>slp_RemPerTst_night</th>
      <th>slp_LightPerTst_night</th>
      <th>slp_DeepPerTst_night</th>
      <th>COHORT</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>TIMESINCEDIAG</th>
      <th>Day_Type</th>
      <th>Season</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
      <th>MDSUPDRS2-SCORE</th>
      <th>MDSUPDRS3-SCORE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>daily</td>
      <td>35.3</td>
      <td>33.7</td>
      <td>36.0</td>
      <td>2023-01-31</td>
      <td>2023-02-01</td>
      <td>24900</td>
      <td>62.0</td>
      <td>61.8</td>
      <td>61.6</td>
      <td>56.8</td>
      <td>59.9</td>
      <td>67.5</td>
      <td>2.75</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>12.5</td>
      <td>14.6</td>
      <td>17.8</td>
      <td>1.53</td>
      <td>0.684</td>
      <td>0.692</td>
      <td>NaN</td>
      <td>11100</td>
      <td>0.609</td>
      <td>0.183</td>
      <td>30</td>
      <td>870</td>
      <td>0.782</td>
      <td>0.218</td>
      <td>0.647</td>
      <td>0.135</td>
      <td>0.308</td>
      <td>0.215</td>
      <td>0.227</td>
      <td>0.250</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>2</td>
      <td>daily</td>
      <td>39.7</td>
      <td>38.0</td>
      <td>37.3</td>
      <td>2023-02-01</td>
      <td>2023-02-02</td>
      <td>19600</td>
      <td>61.0</td>
      <td>60.9</td>
      <td>60.9</td>
      <td>54.6</td>
      <td>59.7</td>
      <td>67.6</td>
      <td>4.22</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>14.9</td>
      <td>13.2</td>
      <td>14.3</td>
      <td>17.3</td>
      <td>1.11</td>
      <td>0.740</td>
      <td>0.777</td>
      <td>960.0</td>
      <td>5640</td>
      <td>0.644</td>
      <td>0.112</td>
      <td>11</td>
      <td>630</td>
      <td>0.749</td>
      <td>0.251</td>
      <td>0.658</td>
      <td>0.091</td>
      <td>0.223</td>
      <td>0.209</td>
      <td>0.371</td>
      <td>0.197</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>3</td>
      <td>daily</td>
      <td>71.3</td>
      <td>66.3</td>
      <td>64.3</td>
      <td>2023-02-02</td>
      <td>2023-02-03</td>
      <td>26200</td>
      <td>61.0</td>
      <td>60.8</td>
      <td>60.5</td>
      <td>53.6</td>
      <td>57.1</td>
      <td>69.8</td>
      <td>4.71</td>
      <td>15.1</td>
      <td>15.1</td>
      <td>15.0</td>
      <td>12.7</td>
      <td>14.3</td>
      <td>18.0</td>
      <td>1.43</td>
      <td>0.738</td>
      <td>0.743</td>
      <td>780.0</td>
      <td>9060</td>
      <td>0.628</td>
      <td>0.106</td>
      <td>20</td>
      <td>510</td>
      <td>0.709</td>
      <td>0.291</td>
      <td>0.646</td>
      <td>0.063</td>
      <td>0.257</td>
      <td>0.170</td>
      <td>0.358</td>
      <td>0.215</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>4</td>
      <td>daily</td>
      <td>71.7</td>
      <td>70.0</td>
      <td>71.3</td>
      <td>2023-02-03</td>
      <td>2023-02-04</td>
      <td>26600</td>
      <td>66.0</td>
      <td>65.9</td>
      <td>65.7</td>
      <td>56.1</td>
      <td>63.9</td>
      <td>71.2</td>
      <td>4.16</td>
      <td>15.5</td>
      <td>15.5</td>
      <td>15.4</td>
      <td>13.8</td>
      <td>15.1</td>
      <td>18.1</td>
      <td>1.11</td>
      <td>0.712</td>
      <td>0.718</td>
      <td>NaN</td>
      <td>10400</td>
      <td>0.570</td>
      <td>0.150</td>
      <td>31</td>
      <td>690</td>
      <td>0.789</td>
      <td>0.211</td>
      <td>0.777</td>
      <td>0.011</td>
      <td>0.282</td>
      <td>0.079</td>
      <td>0.484</td>
      <td>0.155</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>5</td>
      <td>daily</td>
      <td>67.3</td>
      <td>67.7</td>
      <td>68.3</td>
      <td>2023-02-04</td>
      <td>2023-02-05</td>
      <td>29500</td>
      <td>64.8</td>
      <td>64.7</td>
      <td>64.7</td>
      <td>54.9</td>
      <td>63.7</td>
      <td>72.9</td>
      <td>5.03</td>
      <td>15.2</td>
      <td>15.2</td>
      <td>15.1</td>
      <td>13.6</td>
      <td>14.7</td>
      <td>18.2</td>
      <td>1.05</td>
      <td>0.743</td>
      <td>0.748</td>
      <td>NaN</td>
      <td>9900</td>
      <td>0.598</td>
      <td>0.136</td>
      <td>25</td>
      <td>930</td>
      <td>0.767</td>
      <td>0.233</td>
      <td>0.748</td>
      <td>0.019</td>
      <td>0.252</td>
      <td>0.149</td>
      <td>0.399</td>
      <td>0.200</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekend</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="VIT-&amp;-sleep-combined">
<h3>VIT &amp; sleep combined<a class="headerlink" href="#VIT-&-sleep-combined" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vit_slp_analysis_dataset</span> <span class="o">=</span> <span class="n">build_analysis_dataset</span><span class="p">(</span><span class="n">device_types</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;VIT&#39;</span><span class="p">,</span> <span class="s1">&#39;SLP_night&#39;</span><span class="p">],</span>
                                                  <span class="n">concept</span><span class="o">=</span><span class="s1">&#39;F&#39;</span><span class="p">,</span>
                                                  <span class="n">window_size</span><span class="o">=</span><span class="s1">&#39;intra_daily&#39;</span><span class="p">,</span>
                                                  <span class="n">change_from_baseline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                                  <span class="n">statistics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">],</span>
                                                  <span class="n">window_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                                  <span class="n">setting</span><span class="o">=</span><span class="s2">&quot;around&quot;</span><span class="p">,</span>
                                                  <span class="n">cohorts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                  <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span>
                                                  <span class="p">)</span>
<span class="n">vit_slp_analysis_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>overall_fatigue_vas</th>
      <th>physical_fatigue_vas</th>
      <th>mental_fatigue_vas</th>
      <th>start_window</th>
      <th>stop_window</th>
      <th>VIT_HearthRate_1min_mean</th>
      <th>VIT_HearthRate_1min_std</th>
      <th>VIT_RespirationRate_1min_mean</th>
      <th>VIT_RespirationRate_1min_std</th>
      <th>VIT_SkinTemperature_1min_mean</th>
      <th>VIT_SkinTemperature_1min_std</th>
      <th>VIT_NbSteps_1min_mean</th>
      <th>VIT_NbSteps_1min_std</th>
      <th>VIT_StepsCum_1min_mean</th>
      <th>VIT_StepsCum_1min_std</th>
      <th>VIT_RRIValue_1min_mean</th>
      <th>VIT_RRIValue_1min_std</th>
      <th>VIT_PostureCategory_1min_mode</th>
      <th>slp_TotalSleepTime_night</th>
      <th>slp_HeartrateMean95_night</th>
      <th>slp_HeartrateMean90_night</th>
      <th>slp_HeartrateMean80_night</th>
      <th>slp_HeartrateQ05_night</th>
      <th>slp_HeartrateQ50_night</th>
      <th>slp_HeartrateQ95_night</th>
      <th>slp_HeartrateStd_night</th>
      <th>slp_ResprateMean95_night</th>
      <th>slp_ResprateMean90_night</th>
      <th>slp_ResprateMean80_night</th>
      <th>slp_ResprateQ05_night</th>
      <th>slp_ResprateQ50_night</th>
      <th>slp_ResprateQ95_night</th>
      <th>slp_ResprateStd_night</th>
      <th>slp_SleepEfficiencyOrigin_night</th>
      <th>slp_SleepEficiencyNew_night</th>
      <th>slp_WakeBefore_night</th>
      <th>slp_WASO_night</th>
      <th>slp_SleepQuality_night</th>
      <th>slp_WakeRatio_night</th>
      <th>slp_WakeEvents_night</th>
      <th>slp_WakeLongest_night</th>
      <th>slp_SleepQuietRatio_night</th>
      <th>slp_SleepActiveRatio_night</th>
      <th>slp_SleepLightRatio_night</th>
      <th>slp_SleepDeepRatio_night</th>
      <th>slp_WakePerTst_night</th>
      <th>slp_RemPerTst_night</th>
      <th>slp_LightPerTst_night</th>
      <th>slp_DeepPerTst_night</th>
      <th>COHORT</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>Day_Type</th>
      <th>Season</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACKJXCP</td>
      <td>1.0</td>
      <td>2</td>
      <td>M</td>
      <td>13.0</td>
      <td>13.0</td>
      <td>16.0</td>
      <td>2022-11-02 07:43:05.851</td>
      <td>2022-11-02 09:43:05.851</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>28100.0</td>
      <td>57.4</td>
      <td>57.0</td>
      <td>56.5</td>
      <td>50.4</td>
      <td>54.4</td>
      <td>64.2</td>
      <td>3.93</td>
      <td>13.2</td>
      <td>13.2</td>
      <td>13.1</td>
      <td>11.5</td>
      <td>12.7</td>
      <td>14.7</td>
      <td>0.836</td>
      <td>0.710</td>
      <td>0.716</td>
      <td>3060.0</td>
      <td>11200.0</td>
      <td>0.649</td>
      <td>0.165</td>
      <td>27.0</td>
      <td>2730.0</td>
      <td>0.718</td>
      <td>0.282</td>
      <td>0.581</td>
      <td>0.137</td>
      <td>0.284</td>
      <td>0.221</td>
      <td>0.308</td>
      <td>0.186</td>
      <td>HV</td>
      <td>26</td>
      <td>Male</td>
      <td>23.374726</td>
      <td>Weekday</td>
      <td>Fall</td>
      <td>43.0</td>
      <td>4.0</td>
      <td>52.50</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>M</td>
      <td>11.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>2023-01-31 06:13:35.551</td>
      <td>2023-01-31 08:13:35.551</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>24900.0</td>
      <td>62.0</td>
      <td>61.8</td>
      <td>61.6</td>
      <td>56.8</td>
      <td>59.9</td>
      <td>67.5</td>
      <td>2.75</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>15.0</td>
      <td>12.5</td>
      <td>14.6</td>
      <td>17.8</td>
      <td>1.530</td>
      <td>0.684</td>
      <td>0.692</td>
      <td>NaN</td>
      <td>11100.0</td>
      <td>0.609</td>
      <td>0.183</td>
      <td>30.0</td>
      <td>870.0</td>
      <td>0.782</td>
      <td>0.218</td>
      <td>0.647</td>
      <td>0.135</td>
      <td>0.308</td>
      <td>0.215</td>
      <td>0.227</td>
      <td>0.250</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AFEFCAH</td>
      <td>1.0</td>
      <td>0</td>
      <td>E</td>
      <td>76.0</td>
      <td>50.0</td>
      <td>80.0</td>
      <td>2022-11-18 19:35:38.726</td>
      <td>2022-11-18 21:35:38.726</td>
      <td>79.441667</td>
      <td>7.073202</td>
      <td>18.850000</td>
      <td>2.839251</td>
      <td>37.074457</td>
      <td>0.351186</td>
      <td>1.766667</td>
      <td>5.199763</td>
      <td>1458.016667</td>
      <td>64.826333</td>
      <td>759.200000</td>
      <td>77.958144</td>
      <td>LeaningBack</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.830450</td>
      <td>Weekday</td>
      <td>Fall</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AFEFCAH</td>
      <td>1.0</td>
      <td>1</td>
      <td>M</td>
      <td>40.0</td>
      <td>50.0</td>
      <td>53.0</td>
      <td>2022-11-19 07:52:42.462</td>
      <td>2022-11-19 09:52:42.462</td>
      <td>87.558333</td>
      <td>9.435135</td>
      <td>18.216667</td>
      <td>3.998284</td>
      <td>37.491977</td>
      <td>0.121943</td>
      <td>1.391667</td>
      <td>3.726570</td>
      <td>85.400000</td>
      <td>41.160763</td>
      <td>692.566667</td>
      <td>75.905817</td>
      <td>Standing</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.830450</td>
      <td>Weekend</td>
      <td>Fall</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AFEFCAH</td>
      <td>2.0</td>
      <td>0</td>
      <td>A</td>
      <td>65.0</td>
      <td>63.0</td>
      <td>60.0</td>
      <td>2023-01-12 11:49:37.068</td>
      <td>2023-01-12 13:49:37.068</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29500.0</td>
      <td>53.7</td>
      <td>53.6</td>
      <td>53.5</td>
      <td>48.0</td>
      <td>52.0</td>
      <td>59.6</td>
      <td>3.33</td>
      <td>18.9</td>
      <td>18.8</td>
      <td>18.8</td>
      <td>17.3</td>
      <td>18.4</td>
      <td>21.2</td>
      <td>1.030</td>
      <td>0.744</td>
      <td>0.748</td>
      <td>NaN</td>
      <td>9960.0</td>
      <td>0.553</td>
      <td>0.143</td>
      <td>28.0</td>
      <td>750.0</td>
      <td>0.846</td>
      <td>0.154</td>
      <td>0.832</td>
      <td>0.014</td>
      <td>0.252</td>
      <td>0.143</td>
      <td>0.424</td>
      <td>0.181</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.830450</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.00</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="Build-the-analysis-dataset---unsupervised-case,-device-aggregated-on-frequency">
<h2>Build the analysis dataset - unsupervised case, device aggregated on frequency<a class="headerlink" href="#Build-the-analysis-dataset---unsupervised-case,-device-aggregated-on-frequency" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">build_dataset_on_frequency</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> build_dataset_on_frequency
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 build_dataset_on_frequency<span class="ansi-blue-fg">(</span>
    device_types<span class="ansi-blue-fg">,</span>
    period<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;D&#39;</span><span class="ansi-blue-fg">,</span>
    statistics<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    thresh<span class="ansi-blue-fg">=</span><span class="ansi-cyan-fg">0.75</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    covariates<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span>
    savepath<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Build the unsupervised dataset by aggregating device data based on frequency, incorporating specified covariates (e.g., demographics, longitudinal covariates, baseline PROs, and disease score for a single cohort), with the option to filter by cohort.

:param device_types: A list of device types to analyze. Each must be one of &#39;SLP_night&#39;, &#39;STS&#39;, &#39;HRV&#39;, &#39;VIT&#39;, &#39;GVA&#39;, &#39;MCR_MCR&#39;, &#39;MCR_MCL&#39;, &#39;COG_dst&#39;, &#39;COG_pvt&#39;.
:type device_types: list of str

:param period: The frequency of aggregation. Default is &#34;D&#34; (daily).
:type period: str, optional

:param statistics: The statistics to compute during aggregation. Default is None, in which case the aggregation is done with [&#34;mean&#34;, &#34;std&#34;, &#34;var&#34;, &#34;max&#34;, &#34;min&#34;, &#34;25p&#34;, &#34;50p&#34;, &#34;75p&#34;, &#34;mode&#34;].
:type statistics: list of str, optional

:param cohorts: The list of cohorts to consider. Default is None, which means all cohorts are considered.
:type cohorts: list of str, optional

:param thresh: The minimum proportion of non-missing values required for aggregation. Value between 0 and 1. Default is 0.75.
:type thresh: float, optional

:param version: Specifies the version of the data to use.
:type version: str, optional

:param imputation: Specifies if the dataset to read must be imputed. Default is False.
:type imputation: bool, optional

:param analysis_set: Specifies whether to use &#39;ias&#39; or &#39;eas&#39;. Default is &#39;ias&#39;.
:type analysis_set: str, optional

:param participants: List of participants to consider. Default is None, in which case all participants from the given dataset (ias or eas) are used.
:type participants: str or list, optional

:param ias_dataset: If participants is None, specifies the dataset to load (&#39;Train&#39;, &#39;Test&#39;, or &#39;all&#39;). Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param covariates: Add covariates to the dataframe. Default is True.
:type covariates: bool, optional

:param savepath: Local path to save the analysis dataset to. If None, the dataset is not saved. Default is None.
:type savepath: str, optional

:return: The analysis dataset with device data aggregated on frequency, including covariates.
:rtype: pandas.DataFrame

:note:
    - The function handles different periods (e.g., daily or other frequencies) and adjusts the aggregation accordingly.
    - If a device type requires daily aggregation or other specific adjustments, those are handled within the function.
    - Covariates (e.g., demographics, baseline PROs) are added to the final dataset by the `add_covariates` function.
    - The final dataset can be saved to a local path if specified in the `savepath` argument.

:raises ValueError: If invalid device types, cohorts or periods are provided.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_builder.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sts_unsupervised_dataset</span> <span class="o">=</span> <span class="n">build_dataset_on_frequency</span><span class="p">([</span><span class="s1">&#39;STS&#39;</span><span class="p">],</span>
                                                      <span class="n">period</span><span class="o">=</span><span class="s2">&quot;3h&quot;</span><span class="p">,</span>
                                                      <span class="n">statistics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">],</span>
                                                      <span class="n">cohorts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PD&#39;</span><span class="p">],</span>
                                                      <span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span>
                                                      <span class="p">)</span>
<span class="n">sts_unsupervised_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>start_window</th>
      <th>stop_window</th>
      <th>sts_SitStand_AngularRange_mean</th>
      <th>sts_StandSit_AngularRange_mean</th>
      <th>sts_SitStand_AngularRange_std</th>
      <th>sts_StandSit_AngularRange_std</th>
      <th>sts_SitStand_Duration_mean</th>
      <th>sts_StandSit_Duration_mean</th>
      <th>sts_SitStand_Duration_std</th>
      <th>sts_StandSit_Duration_std</th>
      <th>sts_SitStand_PeakAcceleration_mean</th>
      <th>sts_StandSit_PeakAcceleration_mean</th>
      <th>sts_SitStand_PeakAcceleration_std</th>
      <th>sts_StandSit_PeakAcceleration_std</th>
      <th>sts_SitStand_PeakAngularVelocity_mean</th>
      <th>sts_StandSit_PeakAngularVelocity_mean</th>
      <th>sts_SitStand_PeakAngularVelocity_std</th>
      <th>sts_StandSit_PeakAngularVelocity_std</th>
      <th>sts_SitStand_PeakJerk_mean</th>
      <th>sts_StandSit_PeakJerk_mean</th>
      <th>sts_SitStand_PeakJerk_std</th>
      <th>sts_StandSit_PeakJerk_std</th>
      <th>sts_SitStand_PeakPower_mean</th>
      <th>sts_StandSit_PeakPower_mean</th>
      <th>sts_SitStand_PeakPower_std</th>
      <th>sts_StandSit_PeakPower_std</th>
      <th>sts_SitStand_PeakVelocity_mean</th>
      <th>sts_StandSit_PeakVelocity_mean</th>
      <th>sts_SitStand_PeakVelocity_std</th>
      <th>sts_StandSit_PeakVelocity_std</th>
      <th>sts_SitStand_Events_count</th>
      <th>sts_StandSit_Events_count</th>
      <th>COHORT</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>TIMESINCEDIAG</th>
      <th>Day_Type</th>
      <th>Season</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
      <th>MDSUPDRS2-SCORE</th>
      <th>MDSUPDRS3-SCORE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>2023-01-31 00:00:00</td>
      <td>2023-01-31 03:00:00</td>
      <td>40.239987</td>
      <td>NaN</td>
      <td>9.007879</td>
      <td>NaN</td>
      <td>1.660000</td>
      <td>NaN</td>
      <td>0.211029</td>
      <td>NaN</td>
      <td>0.892862</td>
      <td>NaN</td>
      <td>0.344484</td>
      <td>NaN</td>
      <td>77.249845</td>
      <td>NaN</td>
      <td>3.110617</td>
      <td>NaN</td>
      <td>6.453604</td>
      <td>NaN</td>
      <td>3.338001</td>
      <td>NaN</td>
      <td>0.306881</td>
      <td>NaN</td>
      <td>0.192352</td>
      <td>NaN</td>
      <td>0.423743</td>
      <td>NaN</td>
      <td>0.121178</td>
      <td>NaN</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>2023-01-31 03:00:00</td>
      <td>2023-01-31 06:00:00</td>
      <td>30.754732</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.260000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.447514</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>36.480928</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.379624</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.067370</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.199862</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>2023-01-31 06:00:00</td>
      <td>2023-01-31 09:00:00</td>
      <td>39.193046</td>
      <td>34.816774</td>
      <td>12.605464</td>
      <td>0.949109</td>
      <td>2.695556</td>
      <td>2.346667</td>
      <td>0.857658</td>
      <td>0.162891</td>
      <td>1.029981</td>
      <td>1.008092</td>
      <td>0.385494</td>
      <td>0.075870</td>
      <td>70.034193</td>
      <td>91.858707</td>
      <td>27.719503</td>
      <td>27.774252</td>
      <td>4.922660</td>
      <td>5.400085</td>
      <td>1.259376</td>
      <td>0.220471</td>
      <td>0.693241</td>
      <td>0.483802</td>
      <td>0.661973</td>
      <td>0.089407</td>
      <td>0.760543</td>
      <td>0.635996</td>
      <td>0.428558</td>
      <td>0.073996</td>
      <td>9.0</td>
      <td>3.0</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>2023-01-31 09:00:00</td>
      <td>2023-01-31 12:00:00</td>
      <td>30.386448</td>
      <td>27.676407</td>
      <td>10.757441</td>
      <td>11.077721</td>
      <td>2.563902</td>
      <td>2.163125</td>
      <td>0.532170</td>
      <td>0.339377</td>
      <td>1.016326</td>
      <td>1.002457</td>
      <td>0.272612</td>
      <td>0.292806</td>
      <td>50.585585</td>
      <td>72.426048</td>
      <td>29.546724</td>
      <td>49.474288</td>
      <td>5.272066</td>
      <td>5.765818</td>
      <td>1.852640</td>
      <td>1.758047</td>
      <td>0.543946</td>
      <td>0.481760</td>
      <td>0.258548</td>
      <td>0.255738</td>
      <td>0.678377</td>
      <td>0.593092</td>
      <td>0.166713</td>
      <td>0.174306</td>
      <td>41.0</td>
      <td>32.0</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>2023-01-31 12:00:00</td>
      <td>2023-01-31 15:00:00</td>
      <td>28.126637</td>
      <td>29.094605</td>
      <td>11.116010</td>
      <td>14.521692</td>
      <td>2.236000</td>
      <td>2.283750</td>
      <td>0.420557</td>
      <td>0.277918</td>
      <td>0.924824</td>
      <td>1.143428</td>
      <td>0.391576</td>
      <td>0.294624</td>
      <td>89.696945</td>
      <td>89.408503</td>
      <td>30.173376</td>
      <td>37.814721</td>
      <td>5.238311</td>
      <td>6.421170</td>
      <td>2.643505</td>
      <td>1.817164</td>
      <td>0.445659</td>
      <td>0.628426</td>
      <td>0.295013</td>
      <td>0.274175</td>
      <td>0.563374</td>
      <td>0.691605</td>
      <td>0.212684</td>
      <td>0.177124</td>
      <td>15.0</td>
      <td>16.0</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
      <td>Weekday</td>
      <td>Winter</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
      <td>6.0</td>
      <td>9.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Preprocess-the-dataframe">
<h2>Preprocess the dataframe<a class="headerlink" href="#Preprocess-the-dataframe" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">processing</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> processing
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>  processing<span class="ansi-blue-fg">(</span>dataset<span class="ansi-blue-fg">,</span> normalize<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;z_score&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Preprocess the given dataset by normalizing the data, encoding categorical variables,
and removing columns with no variability.

:param dataset: The input dataframe to be processed. It should contain the device data,
                diary data, and possibly other columns for analysis.
:type dataset: pandas.DataFrame

:param normalize: Specifies the normalization method to apply to the numerical columns:
                  - &#39;z_score&#39;: Normalize using z-score (standardization).
                  - &#39;min_max&#39;: Normalize using Min-Max scaling.
                  - None: No normalization applied.
                  Default is &#39;z_score&#39;.
:type normalize: {&#39;z_score&#39;, &#39;min_max&#39;, None}, optional

:return: A processed dataframe with the specified normalization applied, categorical variables
          encoded, and columns with no variability removed.
:rtype: pandas.DataFrame

:raises ValueError: If the `normalize` parameter is not one of [&#39;z_score&#39;, &#39;min_max&#39;, None].

:note:
    - Non-numeric columns such as `subject_id`, `tup`, `tup_day`, `start_window` and `stop_window` are excluded from normalization.
    - Categorical columns are mapped to numeric values (e.g., &#39;GENDER&#39;, &#39;COHORT&#39;) using a predefined
      mapping in the `label_mappings` function.
    - One-hot encoding is performed on columns starting with certain prefixes, such as
      `VIT_PostureCategory_1min`, `mcr_class`, and `mcl_class`.
    - Any columns with constant values (no variability) are dropped before returning the result.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/preprocessing.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pr_slp_night_dataset</span> <span class="o">=</span> <span class="n">processing</span><span class="p">(</span><span class="n">slp_night_analysis_dataset</span><span class="p">)</span>
<span class="n">pr_slp_night_dataset</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>overall_fatigue_vas</th>
      <th>physical_fatigue_vas</th>
      <th>mental_fatigue_vas</th>
      <th>start_window</th>
      <th>stop_window</th>
      <th>slp_TotalSleepTime_night</th>
      <th>slp_HeartrateMean95_night</th>
      <th>slp_HeartrateMean90_night</th>
      <th>slp_HeartrateMean80_night</th>
      <th>slp_HeartrateQ05_night</th>
      <th>slp_HeartrateQ50_night</th>
      <th>slp_HeartrateQ95_night</th>
      <th>slp_HeartrateStd_night</th>
      <th>slp_ResprateMean95_night</th>
      <th>slp_ResprateMean90_night</th>
      <th>slp_ResprateMean80_night</th>
      <th>slp_ResprateQ05_night</th>
      <th>slp_ResprateQ50_night</th>
      <th>slp_ResprateQ95_night</th>
      <th>slp_ResprateStd_night</th>
      <th>slp_SleepEfficiencyOrigin_night</th>
      <th>slp_SleepEficiencyNew_night</th>
      <th>slp_WakeBefore_night</th>
      <th>slp_WASO_night</th>
      <th>slp_SleepQuality_night</th>
      <th>slp_WakeRatio_night</th>
      <th>slp_WakeEvents_night</th>
      <th>slp_WakeLongest_night</th>
      <th>slp_SleepQuietRatio_night</th>
      <th>slp_SleepActiveRatio_night</th>
      <th>slp_SleepLightRatio_night</th>
      <th>slp_SleepDeepRatio_night</th>
      <th>slp_WakePerTst_night</th>
      <th>slp_RemPerTst_night</th>
      <th>slp_LightPerTst_night</th>
      <th>slp_DeepPerTst_night</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>TIMESINCEDIAG</th>
      <th>Day_Type</th>
      <th>Season</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
      <th>MDSUPDRS2-SCORE</th>
      <th>MDSUPDRS3-SCORE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>1</td>
      <td>0.698333</td>
      <td>0.553136</td>
      <td>1.098083</td>
      <td>2023-01-31</td>
      <td>2023-02-01</td>
      <td>0.614493</td>
      <td>-0.247359</td>
      <td>-0.257321</td>
      <td>-0.263045</td>
      <td>-0.095532</td>
      <td>-0.300406</td>
      <td>-0.187928</td>
      <td>-0.380659</td>
      <td>-0.085513</td>
      <td>-0.084775</td>
      <td>-0.070705</td>
      <td>-0.552612</td>
      <td>-0.178972</td>
      <td>0.277322</td>
      <td>1.686585</td>
      <td>-0.917359</td>
      <td>-0.913007</td>
      <td>NaN</td>
      <td>1.484820</td>
      <td>0.756597</td>
      <td>0.957765</td>
      <td>1.883199</td>
      <td>0.315403</td>
      <td>-0.179630</td>
      <td>0.179576</td>
      <td>-1.256076</td>
      <td>2.440388</td>
      <td>0.912987</td>
      <td>0.673286</td>
      <td>-2.687898</td>
      <td>1.905607</td>
      <td>-0.769195</td>
      <td>1</td>
      <td>-0.411374</td>
      <td>-0.446824</td>
      <td>0</td>
      <td>1</td>
      <td>-0.251701</td>
      <td>1.430991</td>
      <td>0.892303</td>
      <td>-0.485281</td>
      <td>-0.343974</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>2</td>
      <td>0.940589</td>
      <td>0.783800</td>
      <td>1.174878</td>
      <td>2023-02-01</td>
      <td>2023-02-02</td>
      <td>-0.432381</td>
      <td>-0.366329</td>
      <td>-0.363510</td>
      <td>-0.344759</td>
      <td>-0.366618</td>
      <td>-0.322949</td>
      <td>-0.177509</td>
      <td>0.478058</td>
      <td>-0.085513</td>
      <td>-0.084775</td>
      <td>-0.123287</td>
      <td>-0.192742</td>
      <td>-0.326434</td>
      <td>0.053447</td>
      <td>0.430533</td>
      <td>-0.248561</td>
      <td>0.105666</td>
      <td>0.834588</td>
      <td>-0.341380</td>
      <td>1.365054</td>
      <td>0.049126</td>
      <td>-0.504381</td>
      <td>-0.033614</td>
      <td>-0.748756</td>
      <td>0.748739</td>
      <td>-1.129444</td>
      <td>1.351940</td>
      <td>-0.105715</td>
      <td>0.566075</td>
      <td>-1.136440</td>
      <td>1.160773</td>
      <td>-0.769195</td>
      <td>1</td>
      <td>-0.411374</td>
      <td>-0.446824</td>
      <td>0</td>
      <td>1</td>
      <td>-0.251701</td>
      <td>1.430991</td>
      <td>0.892303</td>
      <td>-0.485281</td>
      <td>-0.343974</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>3</td>
      <td>2.680425</td>
      <td>2.301885</td>
      <td>2.769854</td>
      <td>2023-02-02</td>
      <td>2023-02-03</td>
      <td>0.871274</td>
      <td>-0.366329</td>
      <td>-0.375309</td>
      <td>-0.391453</td>
      <td>-0.489839</td>
      <td>-0.616005</td>
      <td>0.051689</td>
      <td>0.764297</td>
      <td>-0.033225</td>
      <td>-0.031915</td>
      <td>-0.070705</td>
      <td>-0.449792</td>
      <td>-0.326434</td>
      <td>0.366872</td>
      <td>1.387525</td>
      <td>-0.272447</td>
      <td>-0.301803</td>
      <td>0.557103</td>
      <td>0.802504</td>
      <td>1.086902</td>
      <td>-0.027660</td>
      <td>0.626578</td>
      <td>-0.208123</td>
      <td>-1.438604</td>
      <td>1.438634</td>
      <td>-1.267588</td>
      <td>0.659291</td>
      <td>0.301766</td>
      <td>-0.130801</td>
      <td>-1.276502</td>
      <td>1.413736</td>
      <td>-0.769195</td>
      <td>1</td>
      <td>-0.411374</td>
      <td>-0.446824</td>
      <td>0</td>
      <td>1</td>
      <td>-0.251701</td>
      <td>1.430991</td>
      <td>0.892303</td>
      <td>-0.485281</td>
      <td>-0.343974</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>4</td>
      <td>2.702448</td>
      <td>2.500363</td>
      <td>3.183367</td>
      <td>2023-02-03</td>
      <td>2023-02-04</td>
      <td>0.950283</td>
      <td>0.228521</td>
      <td>0.226431</td>
      <td>0.215567</td>
      <td>-0.181787</td>
      <td>0.150450</td>
      <td>0.197542</td>
      <td>0.443009</td>
      <td>0.175924</td>
      <td>0.179522</td>
      <td>0.139624</td>
      <td>0.115718</td>
      <td>0.066798</td>
      <td>0.411647</td>
      <td>0.430533</td>
      <td>-0.582960</td>
      <td>-0.601413</td>
      <td>NaN</td>
      <td>1.250692</td>
      <td>0.078601</td>
      <td>0.535440</td>
      <td>2.008861</td>
      <td>0.053640</td>
      <td>-0.058907</td>
      <td>0.058844</td>
      <td>0.240489</td>
      <td>-0.627057</td>
      <td>0.601384</td>
      <td>-1.756844</td>
      <td>0.081024</td>
      <td>0.570527</td>
      <td>-0.769195</td>
      <td>1</td>
      <td>-0.411374</td>
      <td>-0.446824</td>
      <td>0</td>
      <td>1</td>
      <td>-0.251701</td>
      <td>1.430991</td>
      <td>0.892303</td>
      <td>-0.485281</td>
      <td>-0.343974</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ADQPCTS</td>
      <td>1.0</td>
      <td>5</td>
      <td>2.460193</td>
      <td>2.376985</td>
      <td>3.006147</td>
      <td>2023-02-04</td>
      <td>2023-02-05</td>
      <td>1.523101</td>
      <td>0.085757</td>
      <td>0.084845</td>
      <td>0.098833</td>
      <td>-0.329652</td>
      <td>0.127908</td>
      <td>0.374650</td>
      <td>0.951229</td>
      <td>0.019062</td>
      <td>0.020944</td>
      <td>-0.018123</td>
      <td>0.012898</td>
      <td>-0.129818</td>
      <td>0.456422</td>
      <td>0.251097</td>
      <td>-0.212733</td>
      <td>-0.241881</td>
      <td>NaN</td>
      <td>1.083458</td>
      <td>0.565367</td>
      <td>0.356272</td>
      <td>1.254889</td>
      <td>0.402657</td>
      <td>-0.438324</td>
      <td>0.438287</td>
      <td>-0.093360</td>
      <td>-0.429157</td>
      <td>0.241842</td>
      <td>-0.506041</td>
      <td>-0.834767</td>
      <td>1.202934</td>
      <td>-0.769195</td>
      <td>1</td>
      <td>-0.411374</td>
      <td>-0.446824</td>
      <td>1</td>
      <td>1</td>
      <td>-0.251701</td>
      <td>1.430991</td>
      <td>0.892303</td>
      <td>-0.485281</td>
      <td>-0.343974</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Other-useful-functions">
<h2>Other useful functions<a class="headerlink" href="#Other-useful-functions" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cosanalysis</span> <span class="kn">import</span> <span class="n">get_demographics</span><span class="p">,</span> <span class="n">get_tup_PROs</span><span class="p">,</span> <span class="n">get_baseline_PROs</span><span class="p">,</span> <span class="n">get_disease_score</span><span class="p">,</span> <span class="n">get_timings</span>
</pre></div>
</div>
</div>
<section id="Get-demographics">
<h3>Get demographics<a class="headerlink" href="#Get-demographics" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> get_demographics
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 get_demographics<span class="ansi-blue-fg">(</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Load demographics (COHORT, AGE, GENDER, BMI and TIMESINCEDIAG) for each subject.

:param version: version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:return: A DataFrame containing the following columns : [&#34;subject_id&#34;, &#34;COHORT&#34;, &#34;AGE&#34;, &#34;GENDER&#34;, &#34;BMI&#34;, &#34;TIMESINCEDIAG&#34;].
:rtype: pandas.DataFrame
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demographics</span> <span class="o">=</span> <span class="n">get_demographics</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span><span class="p">)</span>
<span class="n">demographics</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>COHORT</th>
      <th>AGE</th>
      <th>GENDER</th>
      <th>BMI</th>
      <th>TIMESINCEDIAG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACFHJAC</td>
      <td>HD</td>
      <td>35</td>
      <td>Female</td>
      <td>19.132653</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ACKJXCP</td>
      <td>HV</td>
      <td>26</td>
      <td>Male</td>
      <td>23.374726</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ADQPCTS</td>
      <td>PD</td>
      <td>58</td>
      <td>Female</td>
      <td>24.767566</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AEDEYEV</td>
      <td>PD</td>
      <td>77</td>
      <td>Male</td>
      <td>28.027682</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AFEFCAH</td>
      <td>HD</td>
      <td>56</td>
      <td>Female</td>
      <td>30.830450</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Get-PROs">
<h3>Get PROs<a class="headerlink" href="#Get-PROs" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> get_tup_PROs
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 get_tup_PROs<span class="ansi-blue-fg">(</span>
    questions<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
This function retrieves PROs data from the ADAM dataset ADPRO.
It allows filtering by version.

:param questions: List of pros to load. Default is None. Each must be one of &#34;FACITF-SCORE&#34;, &#34;SLPD4&#34;, &#34;KSS&#34;, &#34;fVAS&#34;, &#34;sqVAS&#34;, &#34;PGIS-F&#34;, &#34;PGIC-F&#34;, &#34;PGIS-SQ&#34;, &#34;PGIC-SQ&#34;, &#34;PGIS-DS&#34;, &#34;PGIC-DS&#34;.
:type questions: list of str

:param version: Version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:return: DataFrame with TUP-based PROs.
:rtype: pandas.DataFrame
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tup_PROs</span> <span class="o">=</span> <span class="n">get_tup_PROs</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s2">&quot;v2_analysis&quot;</span><span class="p">)</span>
<span class="n">tup_PROs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>ATUP</th>
      <th>FACITF-SCORE</th>
      <th>SLPD4</th>
      <th>KSS</th>
      <th>fVAS</th>
      <th>sqVAS</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>End of TUP 1</td>
      <td>48.00</td>
      <td>10.00</td>
      <td>3.0</td>
      <td>30.0</td>
      <td>24.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>Start of TUP 1</td>
      <td>47.00</td>
      <td>26.25</td>
      <td>NaN</td>
      <td>6.0</td>
      <td>55.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ACFHJAC</td>
      <td>2</td>
      <td>End of TUP 2</td>
      <td>49.00</td>
      <td>31.25</td>
      <td>3.0</td>
      <td>17.0</td>
      <td>50.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ACFHJAC</td>
      <td>2</td>
      <td>Start of TUP 2</td>
      <td>49.00</td>
      <td>31.25</td>
      <td>3.0</td>
      <td>19.0</td>
      <td>51.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ACKJXCP</td>
      <td>1</td>
      <td>End of TUP 1</td>
      <td>47.67</td>
      <td>32.50</td>
      <td>3.0</td>
      <td>25.0</td>
      <td>59.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Get-PROs-baselines">
<h3>Get PROs baselines<a class="headerlink" href="#Get-PROs-baselines" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> get_baseline_PROs
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 get_baseline_PROs<span class="ansi-blue-fg">(</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Get the baseline (value at Start of TUP 1) of PROs (FACITF-SCORE, KSS and SLPD4). This functions calls get_tup_PROs function.

:param version: Version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:return: DataFrame with the following columns: [&#34;subject_id, &#34;FACITF-SCORE_baseline_7days&#34;, &#34;KSS_baseline_7days&#34;, &#34;SLPD4_baseline_7days&#34;]
:rtype: pandas.DataFrame
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">baseline_PROs</span> <span class="o">=</span> <span class="n">get_baseline_PROs</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span><span class="p">)</span>
<span class="n">baseline_PROs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>FACITF-SCORE_baseline_7days</th>
      <th>KSS_baseline_7days</th>
      <th>SLPD4_baseline_7days</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>ACFHJAC</td>
      <td>47.0</td>
      <td>NaN</td>
      <td>26.25</td>
    </tr>
    <tr>
      <th>5</th>
      <td>ACKJXCP</td>
      <td>43.0</td>
      <td>4.0</td>
      <td>52.50</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADQPCTS</td>
      <td>37.0</td>
      <td>7.0</td>
      <td>43.75</td>
    </tr>
    <tr>
      <th>9</th>
      <td>AEDEYEV</td>
      <td>40.0</td>
      <td>3.0</td>
      <td>16.25</td>
    </tr>
    <tr>
      <th>13</th>
      <td>AFEFCAH</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>35.00</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Get-disease-scores">
<h3>Get disease scores<a class="headerlink" href="#Get-disease-scores" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> get_disease_score
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 get_disease_score<span class="ansi-blue-fg">(</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
    participants<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    ias_dataset<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;Train&#39;</span><span class="ansi-blue-fg">,</span>
    cohorts<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Get the diseases score for each patients of specified cohorts.

:param version: Version of the data to use. Default is None.
:type version: str, optional

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:param participants: List of participant to consider. Default is None, we load all participant from the given dataset (ias or eas).
:type participants: str or list of str, optional

:param ias_dataset: If participants is None, we load the Train set, the Test set or both. Must be one of &#39;Train&#39;, &#39;Test&#39; and &#39;all&#39;. Only useful if analysis_set=&#34;ias&#34;. Default is &#39;Train&#39;.
:type ias_dataset: str, optional

:param cohorts: The list of the cohorts to consider. Default is None, we consider them all.
:type cohorts: list of str, optional

:return: DataFrame with disease scores corresponding to each subject_id and tup.
:rtype: pandas.DataFrame

:raises ValueError: If cohorts argument is invalid.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">disease_scores</span> <span class="o">=</span> <span class="n">get_disease_score</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;v2_analysis&#39;</span><span class="p">)</span>
<span class="n">disease_scores</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>Disease_test</th>
      <th>score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>UHDRS-TFC-SCORE</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ADQPCTS</td>
      <td>1</td>
      <td>MDSUPDRS2-SCORE</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ADQPCTS</td>
      <td>1</td>
      <td>MDSUPDRS3-SCORE</td>
      <td>9.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>AEDEYEV</td>
      <td>1</td>
      <td>MDSUPDRS2-SCORE</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>AEDEYEV</td>
      <td>1</td>
      <td>MDSUPDRS3-SCORE</td>
      <td>38.0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Get-diary-timings">
<h3>Get diary timings<a class="headerlink" href="#Get-diary-timings" title="Link to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">?</span> get_timings
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">Signature:</span>
 get_timings<span class="ansi-blue-fg">(</span>
    subjects<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    timing<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;MAE&#39;</span><span class="ansi-blue-fg">,</span>
    version<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    diaries<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">None</span><span class="ansi-blue-fg">,</span>
    imputation<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
    analysis_set<span class="ansi-blue-fg">=</span><span class="ansi-blue-fg">&#39;ias&#39;</span><span class="ansi-blue-fg">,</span>
<span class="ansi-blue-fg">)</span>
<span class="ansi-red-fg">Docstring:</span>
Get timings corresponding either to diaries, or to subjects for a specified timing (M, A, E, MAE, intra_daily or daily).

:param subjects: List of subjects to consider. Default is None, we return None if diaries is also None, there is no incidence if diaries is not None.
:type subjects: list of str, optional

:param timing: timing to load if diaries is not None. Must be one of &#34;M&#34;, &#34;A&#34;, &#34;E&#34;, &#34;MAE&#34;, &#34;intra_daily&#34;, &#34;daily&#34;. Default is &#34;MAE&#34;.
:type timing: str, optional

:param version: Version of the data to use. Default is None.
:type version: str, optional

:param diaries: diaries to extract timings from (extract the following columns : [&#34;subject_id&#34;, &#34;tup&#34;, &#34;tup_day&#34;, &#34;TIMING&#34;, &#34;Time&#34;])
:type diaries: pandas.DataFrame

:param imputation: Specifies if the dataset should include imputation data. Default is False.
:type imputation: bool, optional

:param analysis_set: &#34;ias&#34; or &#34;eas&#34;. Default is &#34;ias&#34;.
:type analysis_set: str, optional

:return: DataFrame with timings (contains the following columns : [&#34;subject_id&#34;, &#34;tup&#34;, &#34;tup_day&#34;, &#34;TIMING&#34;, &#34;Time&#34;])
:rtype: pandas.DataFrame

:raises ValueError: if timing not in [&#34;M&#34;, &#34;A&#34;, &#34;E&#34;, &#34;MAE&#34;, &#34;intra_daily&#34;, &#34;daily&#34;], or if subjects are not valid.
<span class="ansi-red-fg">File:</span>      ~/cos-analysis/git/cos-analysis/cosanalysis/dataset_manager/diaries_manager.py
<span class="ansi-red-fg">Type:</span>      function
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">timings</span> <span class="o">=</span> <span class="n">get_timings</span><span class="p">(</span><span class="n">subjects</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ACFHJAC&quot;</span><span class="p">],</span> <span class="n">timing</span><span class="o">=</span><span class="s2">&quot;MAE&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&quot;v2_analysis&quot;</span><span class="p">)</span>
<span class="n">timings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>1</td>
      <td>M</td>
      <td>2024-09-03 08:39:23.520</td>
    </tr>
    <tr>
      <th>1</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>1</td>
      <td>A</td>
      <td>2024-09-03 14:08:07.607</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>1</td>
      <td>E</td>
      <td>2024-09-03 18:39:55.459</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>2</td>
      <td>M</td>
      <td>2024-09-04 09:22:39.329</td>
    </tr>
    <tr>
      <th>4</th>
      <td>ACFHJAC</td>
      <td>1</td>
      <td>2</td>
      <td>A</td>
      <td>2024-09-04 13:08:18.118</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">timings</span> <span class="o">=</span> <span class="n">get_timings</span><span class="p">(</span><span class="n">diaries</span><span class="o">=</span><span class="n">diaries_fatigue_intra_day_ibd</span><span class="p">)</span>
<span class="n">timings</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>subject_id</th>
      <th>tup</th>
      <th>tup_day</th>
      <th>TIMING</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>BAGDKXD</td>
      <td>2.0</td>
      <td>1</td>
      <td>M</td>
      <td>2024-05-19 07:52:19.201</td>
    </tr>
    <tr>
      <th>1</th>
      <td>BAGDKXD</td>
      <td>2.0</td>
      <td>1</td>
      <td>E</td>
      <td>2024-05-19 18:43:13.784</td>
    </tr>
    <tr>
      <th>2</th>
      <td>BAGDKXD</td>
      <td>2.0</td>
      <td>6</td>
      <td>A</td>
      <td>2024-05-24 15:53:24.103</td>
    </tr>
    <tr>
      <th>3</th>
      <td>BAGDKXD</td>
      <td>3.0</td>
      <td>3</td>
      <td>M</td>
      <td>2024-07-05 08:15:23.660</td>
    </tr>
    <tr>
      <th>4</th>
      <td>BAGDKXD</td>
      <td>3.0</td>
      <td>4</td>
      <td>E</td>
      <td>2024-07-06 17:45:21.051</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README.html" class="btn btn-neutral float-left" title="Introduction to COS-analysis package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cosanalysis.html" class="btn btn-neutral float-right" title="Useful functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Let it Care.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>